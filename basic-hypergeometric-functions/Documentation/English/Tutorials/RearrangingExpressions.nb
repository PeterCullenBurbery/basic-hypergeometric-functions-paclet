(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    138436,       4089]
NotebookOptionsPosition[    125508,       3785]
NotebookOutlinePosition[    126097,       3804]
CellTagsIndexPosition[    126054,       3801]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Rearranging Expressions", "Title",
 CellID->555292541,ExpressionUUID->"4392a549-f5bc-4eed-86cd-bd4f56abb022"],

Cell[TextData[{
 "The functions defined in the ",
 Cell[BoxData["PeterBurbery`BasicHypergeometricFunctions`"], "InlineFormula",
  FormatType->StandardForm,ExpressionUUID->
  "33d3b121-2af1-420b-8d3c-d9ff2a4461b4"],
 " context provide support for placing the q in front."
}], "Text",
 CellChangeTimes->{{3.894968939778677*^9, 3.8949689950377684`*^9}},
 CellID->34242218,ExpressionUUID->"da171d77-9ecf-45b9-aa05-d6d9041a939a"],

Cell[CellGroupData[{

Cell["This loads the package:", "MathCaption",
 CellChangeTimes->{{3.894968996501567*^9, 3.8949690035870385`*^9}},
 CellID->513850824,ExpressionUUID->"7bada169-7c3d-4776-b7f7-9de2435b9070"],

Cell[BoxData[
 RowBox[{"<<", "PeterBurbery`BasicHypergeometricFunctions`"}]], "Input",
 CellChangeTimes->{{3.8949690042623696`*^9, 3.894969012464512*^9}},
 CellLabel->"In[9]:=",
 CellID->542855510,ExpressionUUID->"0dee9fdd-35d3-4720-adb9-0ac50b09f781"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Put Q in the front", "Section",
 CellChangeTimes->{{3.3702661238247538`*^9, 3.370266130890768*^9}, 
   3.371301959371707*^9, {3.3751044240283327`*^9, 3.375104428916211*^9}, {
   3.8949690267658215`*^9, 3.894969030164384*^9}},
 CellID->2591,ExpressionUUID->"e289c6af-e7f4-4b1c-818e-9eda6dd9cb82"],

Cell[CellGroupData[{

Cell["\<\
The built-in function PositionQInFrontOfList puts q in front of a list. The \
function works by using UnsortedComplement.\
\>", "Text",
 CellChangeTimes->{{3.8949690314164023`*^9, 3.894969074727002*^9}},
 CellID->590619292,ExpressionUUID->"b612293d-b26c-4a4f-9c16-0ee176d43931"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"PositionQInFrontOfList", "[", 
  RowBox[{"{", 
   RowBox[{"b", ",", "c", ",", "d", ",", "q", ",", "f", ",", "q"}], "}"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.894969041619733*^9, 3.894969080736179*^9}},
 CellLabel->"In[10]:=",
 CellID->219423307,ExpressionUUID->"c005b7de-a8c7-45df-9f11-f64113601e19"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"q", ",", "q", ",", "b", ",", "c", ",", "d", ",", "f"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.89496908104531*^9},
 CellLabel->"Out[10]=",
 CellID->272831206,ExpressionUUID->"9e37fe5e-f82a-4f84-a340-a0975f379d0a"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Rearranging", "Section",
 CellChangeTimes->{{3.3702661238247538`*^9, 3.370266130890768*^9}, 
   3.371301959371707*^9, {3.3751044240283327`*^9, 3.375104428916211*^9}, {
   3.8949690267658215`*^9, 3.894969030164384*^9}, {3.894969115477767*^9, 
   3.8949691269123325`*^9}},
 CellID->237748664,ExpressionUUID->"00036f6a-63fd-4f4f-a2de-66a749e3d47c"],

Cell[CellGroupData[{

Cell["This is the expression tree of a a b s a s q s d \
s\[NonBreakingSpace]d:", "MathCaption",
 CellChangeTimes->{{3.8949691282524586`*^9, 3.8949691430957074`*^9}},
 CellID->30906755,ExpressionUUID->"e250cd9f-9b0e-4e7b-8c8b-dd8939ecf38b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"exampleInput", "=", 
  RowBox[{
  "a", " ", "b", " ", "s", " ", "a", " ", "s", " ", "q", " ", "s", " ", "d", 
   " ", "s", " ", "d"}]}]], "Input",
 CellChangeTimes->{{3.8949691440325036`*^9, 3.894969152146666*^9}},
 CellLabel->"In[3]:=",
 CellID->501709717,ExpressionUUID->"1542516c-d21f-43bc-a96f-434c0b7c4782"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["a", "2"], " ", "b", " ", 
  SuperscriptBox["d", "2"], " ", "q", " ", 
  SuperscriptBox["s", "4"]}]], "Output",
 CellChangeTimes->{3.8949691525907345`*^9, 3.894975444077566*^9},
 CellLabel->"Out[3]=",
 CellID->187249567,ExpressionUUID->"488c71cf-7b69-4b59-85bc-82928f353118"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ExpressionTree", "[", "exampleInput", "]"}]], "Input",
 CellChangeTimes->{{3.8949691546072807`*^9, 3.894969158038974*^9}},
 CellLabel->"In[4]:=",
 CellID->45907700,ExpressionUUID->"afa7c4e4-7e9c-42d8-8885-a887ef7faee4"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Trees",
   DynamicModuleBox[{Typeset`tree = HoldComplete[
     Tree[Times, {
       Tree[Power, {
         Tree[$CellContext`a, None], 
         Tree[2, None]}], 
       Tree[$CellContext`b, None], 
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}], 
       Tree[$CellContext`q, None], 
       Tree[Power, {
         Tree[$CellContext`s, None], 
         Tree[4, None]}]}]]}, 
    NamespaceBox[{
      {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         0.3496029493900505, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         1.0488088481701514`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         1.7480147469502525`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         2.4472206457303534`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         3.1464265445104544`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.3496029493900505, 0.7574021974529568}, {0., 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.3496029493900505, 0.7574021974529568}, {0.699205898780101,
          0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 0.7574021974529568}, {
         1.398411797560202, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 0.7574021974529568}, {
         2.097617696340303, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1464265445104544`, 0.7574021974529568}, {
         2.796823595120404, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1464265445104544`, 0.7574021974529568}, {
         3.496029493900505, 0.}}]}}, 
      {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
       TagBox[InsetBox[
         FrameBox["Times",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7480147469502525, 1.5148043949059136}],
        "DynamicName",
        BoxID -> "VertexID$1"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {0.3496029493900505, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$2"], 
       TagBox[InsetBox[
         FrameBox["a",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0., 0.}],
        "DynamicName",
        BoxID -> "VertexID$3"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0.699205898780101, 0.}],
        "DynamicName",
        BoxID -> "VertexID$4"], 
       TagBox[InsetBox[
         FrameBox["b",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.0488088481701514, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$5"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7480147469502525, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$6"], 
       TagBox[InsetBox[
         FrameBox["d",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.398411797560202, 0.}],
        "DynamicName",
        BoxID -> "VertexID$7"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.097617696340303, 0.}],
        "DynamicName",
        BoxID -> "VertexID$8"], 
       TagBox[InsetBox[
         FrameBox["q",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.4472206457303534, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$9"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {3.1464265445104544, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$10"], 
       TagBox[InsetBox[
         FrameBox["s",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.796823595120404, 0.}],
        "DynamicName",
        BoxID -> "VertexID$11"], 
       TagBox[InsetBox[
         FrameBox["4",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {3.496029493900505, 0.}],
        "DynamicName",
        BoxID -> "VertexID$12"]}}]]],
  AlignmentPoint->Center,
  Axes->False,
  AxesLabel->None,
  AxesOrigin->Automatic,
  AxesStyle->{},
  Background->None,
  BaseStyle->{},
  BaselinePosition->Automatic,
  ContentSelectable->Automatic,
  DefaultBaseStyle->"TreeGraphics",
  Epilog->{},
  FormatType->StandardForm,
  Frame->False,
  FrameLabel->None,
  FrameStyle->{},
  FrameTicks->None,
  FrameTicksStyle->{},
  GridLines->None,
  GridLinesStyle->{},
  ImageMargins->0.,
  ImagePadding->All,
  ImageSize->Automatic,
  LabelStyle->{},
  PlotLabel->None,
  PlotRange->All,
  PlotRangeClipping->False,
  PlotRangePadding->Automatic,
  PlotRegion->Automatic,
  Prolog->{},
  RotateLabel->True,
  Ticks->Automatic,
  TicksStyle->{}]], "Output",
 CellChangeTimes->{3.8949691592289743`*^9, 3.894975447564186*^9},
 CellLabel->"Out[4]=",
 CellID->895181536,ExpressionUUID->"8107efe8-ed22-4c56-87de-5eaa90656bb7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We want to put q in the front. We need to verify q is in the expression first:\
\>", "MathCaption",
 CellChangeTimes->{{3.8949691623887377`*^9, 3.8949691782679667`*^9}},
 CellID->340949841,ExpressionUUID->"f8838af4-b20d-4ec5-a66f-f7d8b078f083"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"exampleInput", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949691790251617`*^9, 3.8949691820111685`*^9}},
 CellLabel->"In[5]:=",
 CellID->152984908,ExpressionUUID->"3ffb77c4-590c-4ead-a50c-cb1b18c855f9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", "4", "}"}], "}"}]], "Output",
 CellChangeTimes->{3.894969182409585*^9, 3.894975448662047*^9},
 CellLabel->"Out[5]=",
 CellID->130135511,ExpressionUUID->"c93a09c0-c592-4a37-a1c9-a736cb2815d0"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["An expression without q would have a different output.", "MathCaption",
 CellChangeTimes->{{3.8949691900043087`*^9, 3.8949692012692738`*^9}},
 CellID->579788294,ExpressionUUID->"2e56b696-7921-4dd2-bf7d-0c15be4b3e70"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expressionWithNoQ", "=", 
  RowBox[{"b", " ", "d"}]}]], "Input",
 CellChangeTimes->{{3.894969202497032*^9, 3.894969212139762*^9}},
 CellLabel->"In[6]:=",
 CellID->8585758,ExpressionUUID->"9e3189cf-1dac-4683-b068-aa39e4a347fe"],

Cell[BoxData[
 RowBox[{"b", " ", "d"}]], "Output",
 CellChangeTimes->{3.894969212516898*^9, 3.8949754508089275`*^9},
 CellLabel->"Out[6]=",
 CellID->15928604,ExpressionUUID->"4705ed4c-77f3-4d52-93c1-3e4e4dd55fb2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"expressionWithNoQ", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949692159597335`*^9, 3.8949692198048673`*^9}},
 CellLabel->"In[7]:=",
 CellID->1001352657,ExpressionUUID->"8d2cec3f-4b54-43fc-ae0e-c64bd1ae354a"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{3.89496922053944*^9, 3.8949754523779373`*^9},
 CellLabel->"Out[7]=",
 CellID->555168197,ExpressionUUID->"ed66c2d4-31f0-4bb5-ba5d-b990fa15b75b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["The q could be raised to a power:", "MathCaption",
 CellChangeTimes->{{3.8949692252117195`*^9, 3.8949692303046722`*^9}},
 CellID->210058381,ExpressionUUID->"8565d89a-3dc1-40ac-acd5-d801d217a040"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qraisedtothepower", "=", 
  RowBox[{"b", " ", "d", " ", 
   SuperscriptBox["q", "2"], " ", "d", " ", "b"}]}]], "Input",
 CellChangeTimes->{{3.8949692323762565`*^9, 3.8949692414595823`*^9}},
 CellLabel->"In[8]:=",
 CellID->3618976,ExpressionUUID->"2de0fa28-d123-428b-b5e2-98d1c8625d06"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["b", "2"], " ", 
  SuperscriptBox["d", "2"], " ", 
  SuperscriptBox["q", "2"]}]], "Output",
 CellChangeTimes->{3.894969241859357*^9, 3.8949754544982395`*^9},
 CellLabel->"Out[8]=",
 CellID->60384182,ExpressionUUID->"94746ca0-d6f1-48e7-8278-248ff52f0647"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"qraisedtothepower", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949692460745296`*^9, 3.89496924958002*^9}},
 CellLabel->"In[9]:=",
 CellID->158897045,ExpressionUUID->"660b225c-1422-4319-8e29-d30e3deb8688"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"3", ",", "1"}], "}"}], "}"}]], "Output",
 CellChangeTimes->{3.89496924999722*^9, 3.8949754562030897`*^9},
 CellLabel->"Out[9]=",
 CellID->90949083,ExpressionUUID->"601fecce-349c-4039-8f5b-2f1b74399bd6"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Let's look at these three examples from the perspective of Cases:\
\>", "MathCaption",
 CellChangeTimes->{{3.8949692568198767`*^9, 3.8949692685568333`*^9}},
 CellID->45747336,ExpressionUUID->"2af08122-2b75-4880-a344-84d2102e1006"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"exampleInput", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949692696952534`*^9, 3.8949692739442234`*^9}},
 CellLabel->"In[10]:=",
 CellID->106947108,ExpressionUUID->"66b70e28-e77a-447e-a23b-1b9e9d0d56eb"],

Cell[BoxData[
 RowBox[{"{", "q", "}"}]], "Output",
 CellChangeTimes->{3.8949692743166456`*^9, 3.894975458642703*^9},
 CellLabel->"Out[10]=",
 CellID->688234202,ExpressionUUID->"4c82f576-35b3-4c89-9dda-a2b8fadfdd98"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"expressionWithNoQ", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949692696952534`*^9, 3.8949692788900175`*^9}},
 CellLabel->"In[11]:=",
 CellID->289386853,ExpressionUUID->"4468754d-b339-4a2a-9d0d-4595095e64b6"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{3.8949692791362443`*^9, 3.894975461371749*^9},
 CellLabel->"Out[11]=",
 CellID->383066580,ExpressionUUID->"48a35c84-046a-4567-9766-96920108ee49"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"qraisedtothepower", ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949692696952534`*^9, 3.8949692827785826`*^9}},
 CellLabel->"In[12]:=",
 CellID->616336306,ExpressionUUID->"d79fbaf0-27e6-49a8-aa49-3068b2ea26df"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{3.8949692831055317`*^9, 3.894975462439204*^9},
 CellLabel->"Out[12]=",
 CellID->287890430,ExpressionUUID->"f29a22a9-3747-4e8f-b627-7b11e218ce82"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
The last example should have something, but q is on a higher level. Let's \
look at the expression tree.\
\>", "MathCaption",
 CellChangeTimes->{{3.894969287663664*^9, 3.894969313196578*^9}},
 CellID->657986846,ExpressionUUID->"58782be3-aee4-4688-9aa0-f67ced329f3f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}]], "Input",
 CellChangeTimes->{{3.89496931377957*^9, 3.8949693172066326`*^9}},
 CellLabel->"In[13]:=",
 CellID->3639185,ExpressionUUID->"53397038-fd0e-4d9a-9edd-b596769b620d"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Trees",
   DynamicModuleBox[{Typeset`tree = HoldComplete[
     Tree[Times, {
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}], 
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}], 
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]}]]}, 
    NamespaceBox[{
      {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         0.34874291623145787`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         1.7437145811572892`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         3.1386862460831204`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.34874291623145787`, 0.7555526554078994}, {0., 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.34874291623145787`, 0.7555526554078994}, {
         0.6974858324629157, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 0.7555526554078994}, {
         1.3949716649258315`, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 0.7555526554078994}, {
         2.092457497388747, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1386862460831204`, 0.7555526554078994}, {
         2.789943329851663, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1386862460831204`, 0.7555526554078994}, {
         3.4874291623145783`, 0.}}]}}, 
      {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
       TagBox[InsetBox[
         FrameBox["Times",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7437145811572892, 1.5111053108157988}],
        "DynamicName",
        BoxID -> "VertexID$1"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {0.34874291623145787, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$2"], 
       TagBox[InsetBox[
         FrameBox["b",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0., 0.}],
        "DynamicName",
        BoxID -> "VertexID$3"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0.6974858324629157, 0.}],
        "DynamicName",
        BoxID -> "VertexID$4"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7437145811572892, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$5"], 
       TagBox[InsetBox[
         FrameBox["d",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.3949716649258315, 0.}],
        "DynamicName",
        BoxID -> "VertexID$6"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.092457497388747, 0.}],
        "DynamicName",
        BoxID -> "VertexID$7"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {3.1386862460831204, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$8"], 
       TagBox[InsetBox[
         FrameBox["q",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.789943329851663, 0.}],
        "DynamicName",
        BoxID -> "VertexID$9"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {3.4874291623145783, 0.}],
        "DynamicName",
        BoxID -> "VertexID$10"]}}]]],
  AlignmentPoint->Center,
  Axes->False,
  AxesLabel->None,
  AxesOrigin->Automatic,
  AxesStyle->{},
  Background->None,
  BaseStyle->{},
  BaselinePosition->Automatic,
  ContentSelectable->Automatic,
  DefaultBaseStyle->"TreeGraphics",
  Epilog->{},
  FormatType->StandardForm,
  Frame->False,
  FrameLabel->None,
  FrameStyle->{},
  FrameTicks->None,
  FrameTicksStyle->{},
  GridLines->None,
  GridLinesStyle->{},
  ImageMargins->0.,
  ImagePadding->All,
  ImageSize->Automatic,
  LabelStyle->{},
  PlotLabel->None,
  PlotRange->All,
  PlotRangeClipping->False,
  PlotRangePadding->Automatic,
  PlotRegion->Automatic,
  Prolog->{},
  RotateLabel->True,
  Ticks->Automatic,
  TicksStyle->{}]], "Output",
 CellChangeTimes->{3.8949693175765953`*^9, 3.894975465146831*^9},
 CellLabel->"Out[13]=",
 CellID->781595662,ExpressionUUID->"84c8a925-7c7f-43d1-9477-0b21d4c74fd7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", "1"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.894969320974035*^9, 3.894969324249234*^9}},
 CellLabel->"In[14]:=",
 CellID->106876852,ExpressionUUID->"b8a9ab4a-ca17-489b-a112-77b3eb665233"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{3.894969324948366*^9, 3.8949754692313843`*^9},
 CellLabel->"Out[14]=",
 CellID->78099367,ExpressionUUID->"c1912582-c320-4a31-a835-d77a09a1b203"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["q is on the second level:", "MathCaption",
 CellChangeTimes->{{3.8949693826997375`*^9, 3.8949693860439405`*^9}},
 CellID->201555096,ExpressionUUID->"ea217606-4fc7-4ae5-b860-1a9d9c0c9bb4"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", "2"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.894969320974035*^9, 3.894969324249234*^9}, {
  3.8949693866741505`*^9, 3.8949693878641925`*^9}},
 CellLabel->"In[15]:=",
 CellID->76274047,ExpressionUUID->"7365682a-9352-4f44-8e92-8fa88547b46e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{3.894969388494458*^9, 3.894975472427712*^9},
 CellLabel->"Out[15]=",
 CellID->268218734,ExpressionUUID->"d0cf1f2d-53e1-484a-9edc-173b312ec335"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We might want just level 2 and not the subtrees. We can specify this:\
\>", "MathCaption",
 CellChangeTimes->{{3.894969400701731*^9, 3.894969414339944*^9}},
 CellID->116384939,ExpressionUUID->"193fd985-a1c8-4cb4-8049-61c540b24416"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   RowBox[{"{", "2", "}"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.894969320974035*^9, 3.894969324249234*^9}, {
  3.8949693866741505`*^9, 3.894969416293313*^9}},
 CellLabel->"In[16]:=",
 CellID->11721902,ExpressionUUID->"1650bdc2-d3dd-44d2-935a-cb0166afa61e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{3.8949694167668667`*^9, 3.894975475358383*^9},
 CellLabel->"Out[16]=",
 CellID->122696485,ExpressionUUID->"f3d6bc50-6c9c-40f3-bf12-4a151619f9cb"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["q is in the leaves:", "MathCaption",
 CellChangeTimes->{{3.8949693761751165`*^9, 3.894969379816039*^9}},
 CellID->7379660,ExpressionUUID->"86b94b57-eaac-4303-81af-a7050b4a3f0d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLeaves", "[", 
  RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949694237806373`*^9, 3.894969444523631*^9}},
 CellLabel->"In[17]:=",
 CellID->57152497,ExpressionUUID->"fc483901-d97e-4372-9f6a-9813c3022a4b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{{3.8949694289816074`*^9, 3.894969445137455*^9}, 
   3.894975477791693*^9},
 CellLabel->"Out[17]=",
 CellID->99386605,ExpressionUUID->"c5e71275-b015-4f09-85eb-6a48969472f9"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["We can also use -1 level specification:", "MathCaption",
 CellChangeTimes->{{3.8949693761751165`*^9, 3.894969379816039*^9}, {
  3.894969499172389*^9, 3.894969505432061*^9}},
 CellID->600024437,ExpressionUUID->"124a6d2d-ea42-451a-94ee-c679eb1ebe95"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"-", "1"}], "}"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.8949694237806373`*^9, 3.894969444523631*^9}, {
  3.8949695061181626`*^9, 3.894969515298168*^9}},
 CellLabel->"In[18]:=",
 CellID->356384648,ExpressionUUID->"85f25a87-aaee-49ac-aec1-40dc56984d69"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{3.8949695157736745`*^9, 3.8949754802745523`*^9},
 CellLabel->"Out[18]=",
 CellID->51287920,ExpressionUUID->"44758134-dc52-4f6e-9723-314aab58a870"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Another way to get q is with TreeLeafQ:", "MathCaption",
 CellChangeTimes->{{3.8949695522537136`*^9, 3.8949695588228693`*^9}},
 CellID->32533157,ExpressionUUID->"ef013166-4ead-44c5-b462-ff65ddc99d01"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeSelect", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   "TreeLeafQ"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949694237806373`*^9, 3.894969444523631*^9}, {
  3.8949695061181626`*^9, 3.894969515298168*^9}, {3.894969559492277*^9, 
  3.894969569287594*^9}},
 CellLabel->"In[19]:=",
 CellID->221488453,ExpressionUUID->"0416be1e-c919-43ec-aa1e-85469159a7b8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellChangeTimes->{3.894969569922017*^9, 3.894975482719123*^9},
 CellLabel->"Out[19]=",
 CellID->44145120,ExpressionUUID->"35e9dc97-64da-40ab-bf0d-b1170d95795f"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["We can get the data with TreeData:", "MathCaption",
 CellChangeTimes->{{3.894969587792997*^9, 3.8949695947360897`*^9}},
 CellID->441304007,ExpressionUUID->"a2133ad2-2225-44aa-9f09-fb71192a71ea"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeData", "/@", 
  RowBox[{"TreeSelect", "[", 
   RowBox[{
    RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
    "TreeLeafQ"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.894969577102889*^9, 3.8949695791575985`*^9}},
 CellLabel->"In[20]:=",
 CellID->784023909,ExpressionUUID->"a58c9ff8-287c-44c1-b668-5330c449eee6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"b", ",", "2", ",", "d", ",", "2", ",", "q", ",", "2"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.894969579437874*^9, 3.8949754849984426`*^9},
 CellLabel->"Out[20]=",
 CellID->565604538,ExpressionUUID->"81941b3a-1333-4d5a-a4ac-58c4a01cf9cd"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
If q is in the expression, then q will be in this list. Otherwise it will not \
be.\
\>", "MathCaption",
 CellChangeTimes->{{3.8949695997676344`*^9, 3.8949696073557587`*^9}, {
  3.8949699741404486`*^9, 3.894969984771845*^9}},
 CellID->48363548,ExpressionUUID->"5149010d-c608-4898-8767-cfd634db1877"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeData", "/@", 
  RowBox[{"TreeSelect", "[", 
   RowBox[{
    RowBox[{"ExpressionTree", "[", "expressionWithNoQ", "]"}], ",", 
    "TreeLeafQ"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.894969577102889*^9, 3.8949695791575985`*^9}, {
  3.89496998582251*^9, 3.8949699920734425`*^9}},
 CellLabel->"In[21]:=",
 CellID->265849720,ExpressionUUID->"0994fd9e-af71-478d-908d-4500620df444"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"b", ",", "d"}], "}"}]], "Output",
 CellChangeTimes->{3.8949699924218483`*^9, 3.894975487848468*^9},
 CellLabel->"Out[21]=",
 CellID->36210837,ExpressionUUID->"affd3fdf-d9ac-416c-862d-47ff1e8b97d6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MemberQ", "[", 
  RowBox[{
   RowBox[{"TreeData", "/@", 
    RowBox[{"TreeSelect", "[", 
     RowBox[{
      RowBox[{"ExpressionTree", "[", "expressionWithNoQ", "]"}], ",", 
      "TreeLeafQ"}], "]"}]}], ",", "q"}], "]"}]], "Input",
 CellChangeTimes->{{3.8949699954406986`*^9, 3.8949700005932827`*^9}},
 CellLabel->"In[22]:=",
 CellID->10018807,ExpressionUUID->"fd7a6e53-b654-4cbc-b5ee-9f48f9ec5f56"],

Cell[BoxData["False"], "Output",
 CellChangeTimes->{3.8949700010475116`*^9, 3.894975490514269*^9},
 CellLabel->"Out[22]=",
 CellID->90942833,ExpressionUUID->"e76d88ee-cf9e-4426-9e7b-7134e41378e3"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Make a function to test if q is in an expression:", "MathCaption",
 CellChangeTimes->{{3.894970432273905*^9, 3.8949704389607983`*^9}},
 CellID->222360495,ExpressionUUID->"7d92d8c6-2ea7-4ba0-8219-43584f030b73"],

Cell[BoxData[
 RowBox[{
  RowBox[{"myQWithinExpressionQ", "[", "input_", "]"}], ":=", 
  RowBox[{"MemberQ", "[", 
   RowBox[{
    RowBox[{"TreeData", "/@", 
     RowBox[{"TreeSelect", "[", 
      RowBox[{
       RowBox[{"ExpressionTree", "[", "input", "]"}], ",", "TreeLeafQ"}], 
      "]"}]}], ",", "q"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.894970428956133*^9, 3.894970450647216*^9}, {
  3.894970779184678*^9, 3.894970780050911*^9}, {3.894975500869317*^9, 
  3.8949755011785765`*^9}},
 CellLabel->"In[23]:=",
 CellID->876159263,ExpressionUUID->"82beeeb9-2a8c-4463-af42-1005bc5440b5"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Test the function:", "MathCaption",
 CellChangeTimes->{{3.894970460467807*^9, 3.8949704627825966`*^9}},
 CellID->140693972,ExpressionUUID->"bb3a1f82-6483-45e6-bf09-9be803a1b346"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"myQWithinExpressionQ", "[", "expressionWithNoQ", "]"}]], "Input",
 CellChangeTimes->{{3.8949704526003966`*^9, 3.894970456870181*^9}, {
  3.894970785858317*^9, 3.8949707875918765`*^9}, {3.894975504687765*^9, 
  3.8949755049984684`*^9}},
 CellLabel->"In[24]:=",
 CellID->676058770,ExpressionUUID->"d8f63307-e67d-4fc8-a97d-402c45b59692"],

Cell[BoxData["False"], "Output",
 CellChangeTimes->{3.894970457560179*^9, 3.894970788499939*^9, 
  3.8949755055673637`*^9},
 CellLabel->"Out[24]=",
 CellID->173651887,ExpressionUUID->"eea12d2b-f043-46fd-85dd-2cbf4f625467"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Test all the examples with the SameTest QInExpressionQ[#1] == #2.\
\>", "MathCaption",
 CellChangeTimes->{{3.894970681532936*^9, 3.8949706918600016`*^9}},
 CellID->362701572,ExpressionUUID->"9acb1795-a990-4a13-8873-c90e28be41a8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestReport", "[", 
  RowBox[{
   RowBox[{"MapThread", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"TestCreate", "[", 
       RowBox[{"#1", ",", "#2", ",", 
        RowBox[{"TestID", "->", "Automatic"}]}], "]"}], "&"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "expressionWithNoQ", ",", "qraisedtothepower", ",", "exampleInput"}], 
        "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"False", ",", "True", ",", "True"}], "}"}]}], "}"}]}], "]"}], 
   ",", 
   RowBox[{"SameTest", "->", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"myQWithinExpressionQ", "[", "#1", "]"}], "==", "#2"}], "&"}], 
     ")"}]}]}], "]"}]], "Input",
 CellChangeTimes->{{3.894970620321947*^9, 3.894970658010736*^9}, {
   3.8949706949242897`*^9, 3.894970698515956*^9}, 3.8949707919767895`*^9, {
   3.8949755111589785`*^9, 3.8949755136677804`*^9}},
 CellLabel->"In[25]:=",
 CellID->569912814,ExpressionUUID->"19d0214e-62ae-45d5-aa1b-60302fc7b9e9"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["TestReportObject",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"]], 
              ButtonFunction :> (Typeset`open$$ = True), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[{
              InsetBox[
               BoxData[
                FormBox[
                 PaneBox[
                  DynamicBox[
                   FEPrivate`FrontEndResource[
                   "MUnitExpressions", "SuccessIcon"]], Alignment -> Center, 
                  ImageSize -> 
                  Dynamic[{
                    Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], TraditionalForm]]]}, 
             PlotRange -> {{0, 1}, {0, 1}}, Background -> GrayLevel[0.93], 
             Axes -> False, AspectRatio -> 1, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}], Frame -> True, FrameTicks -> None, 
             FrameStyle -> Directive[
               Thickness[Tiny], 
               GrayLevel[0.55]]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Tests count: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["3", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Success rate: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TagBox[
                   InterpretationBox[
                    StyleBox["\"100%\"", ShowStringCharacters -> False], 1., 
                    AutoDelete -> True], PercentForm], "SummaryItem"]}]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              ButtonFunction :> (Typeset`open$$ = False), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[{
              InsetBox[
               BoxData[
                FormBox[
                 PaneBox[
                  DynamicBox[
                   FEPrivate`FrontEndResource[
                   "MUnitExpressions", "SuccessIcon"]], Alignment -> Center, 
                  ImageSize -> 
                  Dynamic[{
                    Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], TraditionalForm]]]}, 
             PlotRange -> {{0, 1}, {0, 1}}, Background -> GrayLevel[0.93], 
             Axes -> False, AspectRatio -> 1, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}], Frame -> True, FrameTicks -> None, 
             FrameStyle -> Directive[
               Thickness[Tiny], 
               GrayLevel[0.55]]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Tests count: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["3", "SummaryItem"]}], ""}, {
               RowBox[{
                 TagBox["\"Success rate: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TagBox[
                   InterpretationBox[
                    StyleBox["\"100%\"", ShowStringCharacters -> False], 1., 
                    AutoDelete -> True], PercentForm], "SummaryItem"]}], ""}, {
               RowBox[{
                 TagBox["\"Succeeded: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["3", "SummaryItem"]}], "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"Time elapsed: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  
                  TemplateBox[{
                   "0.0006032`3.4538550759740443", "\"s\"", "seconds", 
                    "\"Seconds\""}, "Quantity", SyntaxForm -> Mod], 
                  "SummaryItem"]}], "\[SpanFromLeft]"}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  TestReportObject[<|
   "Title" -> Automatic, "Aborted" -> False, 
    "TestResults" -> <|
     4703637773967450255 -> 
      TestObject[<|
        "MetaInformation" -> None, "AbsoluteTime" -> 3.8949755148313847`*^9, 
         "SameTest" -> ($CellContext`myQWithinExpressionQ[#] == #2& ), 
         "SameMessages" -> Testing`MessageMatchQ, "MemoryConstraint" -> 
         DirectedInfinity[1], "TimeConstraint" -> DirectedInfinity[1], 
         "CreationID" -> "fb859b59-9cf7-4585-b8a0-262124d60501", "TestID" -> 
         "8597f48c-5968-4d71-b784-bd13651c719b", "TestFileName" -> "", 
         "EvaluationID" -> "59248cc9-f369-43da-978f-beb1c27e49c8", "Input" -> 
         HoldForm[$CellContext`b $CellContext`d], "ExpectedOutput" -> 
         HoldForm[False], "ExpectedMessages" -> HoldForm[{}], "ActualOutput" -> 
         HoldForm[$CellContext`b $CellContext`d], "ActualMessages" -> {}, 
         "AbsoluteTimeUsed" -> 0``7.150514997831988, "CPUTimeUsed" -> 0., 
         "MemoryUsed" -> 2152, "Outcome" -> "Success"|>], 7194249459347865311 -> 
      TestObject[<|
        "MetaInformation" -> None, "AbsoluteTime" -> 3.8949755148313847`*^9, 
         "SameTest" -> ($CellContext`myQWithinExpressionQ[#] == #2& ), 
         "SameMessages" -> Testing`MessageMatchQ, "MemoryConstraint" -> 
         DirectedInfinity[1], "TimeConstraint" -> DirectedInfinity[1], 
         "CreationID" -> "f8443332-ea6d-4078-8191-b0afea29f6b9", "TestID" -> 
         "469b6c47-bc5d-473d-9e92-f64edbf645b5", "TestFileName" -> "", 
         "EvaluationID" -> "3fdb3916-d1ad-4264-83ed-b017e565b2c7", "Input" -> 
         HoldForm[$CellContext`b^2 $CellContext`d^2 $CellContext`q^2], 
         "ExpectedOutput" -> HoldForm[True], "ExpectedMessages" -> 
         HoldForm[{}], "ActualOutput" -> 
         HoldForm[$CellContext`b^2 $CellContext`d^2 $CellContext`q^2], 
         "ActualMessages" -> {}, "AbsoluteTimeUsed" -> 
         0.0006032`3.9309763306937073, "CPUTimeUsed" -> 0., "MemoryUsed" -> 
         2544, "Outcome" -> "Success"|>], 503140813721197662 -> 
      TestObject[<|
        "MetaInformation" -> None, "AbsoluteTime" -> 3.8949755148325334`*^9, 
         "SameTest" -> ($CellContext`myQWithinExpressionQ[#] == #2& ), 
         "SameMessages" -> Testing`MessageMatchQ, "MemoryConstraint" -> 
         DirectedInfinity[1], "TimeConstraint" -> DirectedInfinity[1], 
         "CreationID" -> "d4ea5852-8e96-4918-8628-c69108596c20", "TestID" -> 
         "dd16a253-8190-453d-8b82-04ad766f3607", "TestFileName" -> "", 
         "EvaluationID" -> "824896fd-2d61-4813-a091-4f8ec63a2cd0", "Input" -> 
         HoldForm[$CellContext`a^2 $CellContext`b $CellContext`d^2 \
$CellContext`q $CellContext`s^4], "ExpectedOutput" -> HoldForm[True], 
         "ExpectedMessages" -> HoldForm[{}], "ActualOutput" -> 
         HoldForm[$CellContext`a^2 $CellContext`b $CellContext`d^2 \
$CellContext`q $CellContext`s^4], "ActualMessages" -> {}, "AbsoluteTimeUsed" -> 
         0``7.1505149978319915, "CPUTimeUsed" -> 0., "MemoryUsed" -> 2184, 
         "Outcome" -> "Success"|>]|>, "FailureResults" -> <||>, 
    "TestsNotEvaluatedKeys" -> {}, "TestsFailedWrongResultsKeys" -> {}, 
    "TestsFailedWithMessagesKeys" -> {}, "TestsFailedWithErrorsKeys" -> {}, 
    "TestsSucceededKeys" -> {4703637773967450255, 7194249459347865311, 
     503140813721197662}|>],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{{3.894970632563512*^9, 3.894970658447559*^9}, 
   3.894970698934829*^9, 3.894970792840955*^9, 3.8949755148763833`*^9},
 CellLabel->"Out[25]=",
 CellID->466247083,ExpressionUUID->"a2d3cb23-f362-4b5c-a1bc-da580aaa66bf"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["There is now the function QWithinExpressionQ built in.", "MathCaption",
 CellChangeTimes->{{3.8949754222456226`*^9, 3.8949754324102144`*^9}},
 CellID->860484422,ExpressionUUID->"97132d86-e5d0-45e3-802f-58f9f0f39315"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QWithinExpressionQ", "/@", 
  RowBox[{"{", 
   RowBox[{
   "expressionWithNoQ", ",", "qraisedtothepower", ",", "exampleInput"}], 
   "}"}]}]], "Input",
 CellChangeTimes->{{3.8949754330826454`*^9, 3.894975437746332*^9}, {
  3.894975521344624*^9, 3.8949755339470797`*^9}},
 CellLabel->"In[27]:=",
 CellID->200160651,ExpressionUUID->"add0c371-31b9-4367-bc72-eb4c040e00e9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"False", ",", "True", ",", "True"}], "}"}]], "Output",
 CellChangeTimes->{{3.894975527420882*^9, 3.894975534196209*^9}},
 CellLabel->"Out[27]=",
 CellID->5616810,ExpressionUUID->"167bdd41-fd93-47ac-ab49-db1c26338de0"]
}, Open  ]]
}, Open  ]],

Cell[BoxData[GridBox[{
   {"XXXX", Cell[
    "XXXX", "TableText",ExpressionUUID->
     "20abe685-ebfa-41b2-9eb3-70763a2cf376"]},
   {"XXXX", Cell[
    "XXXX", "TableText",ExpressionUUID->
     "a120455c-2b93-4748-80c5-2bbc9da0b85c"]},
   {"XXXX", Cell[
    "XXXX", "TableText",ExpressionUUID->
     "719ac795-98a8-4d7b-9296-26ff2232ec52"]}
  }]], "DefinitionBox",
 CellID->771150938,ExpressionUUID->"3a120140-9199-49e4-9455-dd2ea9fc8376"],

Cell["XXXX.", "Caption",
 CellID->56681674,ExpressionUUID->"f5f60007-c978-4515-b0ad-835ba5ae7d46"],

Cell[CellGroupData[{

Cell["XXXX", "MathCaption",
 CellID->135753386,ExpressionUUID->"8cfa9254-3dcb-4f06-b363-a79c3c589855"],

Cell[CellGroupData[{

Cell[BoxData["XXXX"], "Input",
 CellLabel->"In[1]:=",
 CellID->49790133,ExpressionUUID->"95b13454-664a-49ef-b319-51b599fe4560"],

Cell[BoxData["XXXX"], "Output",
 CellLabel->"Out[1]=",
 CellID->380375781,ExpressionUUID->"291a9438-7152-4128-85b7-ac77dd1cf2b8"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Related Guides", "TutorialMoreAboutSection",
 CellChangeTimes->{{3.843042384656711*^9, 3.843042386024461*^9}},
 CellID->161772049,ExpressionUUID->"76801787-5f70-41d3-a497-142c85e4f5f5"],

Cell["XXXX", "TutorialMoreAbout",
 CellID->67989278,ExpressionUUID->"293b3931-85af-4829-9e80-7b6c6a37d4eb"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Related Tech Notes", "RelatedTutorialsSection",
 CellID->183639716,ExpressionUUID->"b843fff2-33d9-4c3f-83b8-39883e476e35"],

Cell["XXXX", "RelatedTutorials",
 CellID->29667343,ExpressionUUID->"3ca477f5-83dd-45cf-97d5-2f16fcf8c0a1"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Metadata", "MetadataSection",
 CellID->213044136,ExpressionUUID->"f70824db-8bb0-4d0d-a14e-72f55559f5eb"],

Cell[TextData[{
 "New in: ",
 Cell["XX", "HistoryData",
  CellTags->"New",ExpressionUUID->"00750a98-0d8b-4ac9-a585-78078de9c9c1"],
 " | Modified in: ",
 Cell[" ", "HistoryData",
  CellTags->"Modified",ExpressionUUID->"d9f1acff-d511-4f24-bff4-6f819a656bdf"],
 " | Obsolete in: ",
 Cell[" ", "HistoryData",
  CellTags->"Obsolete",ExpressionUUID->"35277e2a-5bd5-4a8a-8d1f-f226c2768b16"]
}], "History",
 CellID->72794903,ExpressionUUID->"1fbf2634-130c-4a42-b1fd-588c4e7a8f5b"],

Cell[CellGroupData[{

Cell["Categorization", "CategorizationSection",
 CellID->385949988,ExpressionUUID->"1aa13a2a-d527-4b88-a6f6-f464858515fe"],

Cell["Tech Note", "Categorization",
 CellLabel->"Entity Type",
 CellID->509057587,ExpressionUUID->"ae94e6e3-6a49-4d7e-bb24-26a709fea1f8"],

Cell["PeterBurbery/BasicHypergeometricFunctions", "Categorization",
 CellLabel->"Paclet Name",
 CellID->519804101,ExpressionUUID->"c05029b2-5853-47e8-8989-2c88539ca3a9"],

Cell["PeterBurbery`BasicHypergeometricFunctions`", "Categorization",
 CellLabel->"Context",
 CellID->392509224,ExpressionUUID->"44216c23-99d0-4901-8e9a-cf8468fac854"],

Cell["\<\
PeterBurbery/BasicHypergeometricFunctions/tutorial/RearrangingExpressions\
\>", "Categorization",
 CellLabel->"URI",
 CellID->22346959,ExpressionUUID->"764c4ddd-b0e0-480f-80bd-532b6aa0f96f"]
}, Closed]],

Cell[CellGroupData[{

Cell["Keywords", "KeywordsSection",
 CellID->426123361,ExpressionUUID->"bf86c44b-4960-45b2-b08f-b5f2b7bff7e6"],

Cell["XXXX", "Keywords",
 CellID->393918541,ExpressionUUID->"196dd428-ec9d-4b25-82c2-5e89d985bbff"]
}, Closed]]
}, Open  ]]
},
WindowSize->{1152, 585.6},
WindowMargins->{{
  Automatic, -5.399999999999864}, {-5.399999999999977, Automatic}},
TaggingRules-><|"Paclet" -> "PeterBurbery/BasicHypergeometricFunctions"|>,
FrontEndVersion->"13.3 for Microsoft Windows (64-bit) (May 18, 2023)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "TechNotePageStylesExt.nb", 
  CharacterEncoding -> "UTF-8"],
ExpressionUUID->"ab883cbf-4143-4b6c-8411-58fb2a297181"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 115, 1, 114, "Title",ExpressionUUID->"4392a549-f5bc-4eed-86cd-bd4f56abb022",
 CellID->555292541],
Cell[698, 25, 424, 8, 44, "Text",ExpressionUUID->"da171d77-9ecf-45b9-aa05-d6d9041a939a",
 CellID->34242218],
Cell[CellGroupData[{
Cell[1147, 37, 189, 2, 40, "MathCaption",ExpressionUUID->"7bada169-7c3d-4776-b7f7-9de2435b9070",
 CellID->513850824],
Cell[1339, 41, 252, 4, 25, "Input",ExpressionUUID->"0dee9fdd-35d3-4720-adb9-0ac50b09f781",
 CellID->542855510]
}, Open  ]],
Cell[CellGroupData[{
Cell[1628, 50, 301, 4, 45, "Section",ExpressionUUID->"e289c6af-e7f4-4b1c-818e-9eda6dd9cb82",
 CellID->2591],
Cell[CellGroupData[{
Cell[1954, 58, 288, 5, 44, "Text",ExpressionUUID->"b612293d-b26c-4a4f-9c16-0ee176d43931",
 CellID->590619292],
Cell[CellGroupData[{
Cell[2267, 67, 330, 7, 25, "Input",ExpressionUUID->"c005b7de-a8c7-45df-9f11-f64113601e19",
 CellID->219423307],
Cell[2600, 76, 256, 6, 24, "Output",ExpressionUUID->"9e37fe5e-f82a-4f84-a340-a0975f379d0a",
 CellID->272831206]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[2917, 89, 351, 5, 45, "Section",ExpressionUUID->"00036f6a-63fd-4f4f-a2de-66a749e3d47c",
 CellID->237748664],
Cell[CellGroupData[{
Cell[3293, 98, 240, 3, 40, "MathCaption",ExpressionUUID->"e250cd9f-9b0e-4e7b-8c8b-dd8939ecf38b",
 CellID->30906755],
Cell[CellGroupData[{
Cell[3558, 105, 336, 7, 25, "Input",ExpressionUUID->"1542516c-d21f-43bc-a96f-434c0b7c4782",
 CellID->501709717],
Cell[3897, 114, 316, 7, 25, "Output",ExpressionUUID->"488c71cf-7b69-4b59-85bc-82928f353118",
 CellID->187249567]
}, Open  ]],
Cell[CellGroupData[{
Cell[4250, 126, 243, 4, 25, "Input",ExpressionUUID->"afa7c4e4-7e9c-42d8-8885-a887ef7faee4",
 CellID->45907700],
Cell[4496, 132, 11190, 300, 178, "Output",ExpressionUUID->"8107efe8-ed22-4c56-87de-5eaa90656bb7",
 CellID->895181536]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[15735, 438, 254, 4, 40, "MathCaption",ExpressionUUID->"f8838af4-b20d-4ec5-a66f-f7d8b078f083",
 CellID->340949841],
Cell[CellGroupData[{
Cell[16014, 446, 263, 5, 25, "Input",ExpressionUUID->"3ffb77c4-590c-4ead-a50c-cb1b18c855f9",
 CellID->152984908],
Cell[16280, 453, 235, 5, 24, "Output",ExpressionUUID->"c93a09c0-c592-4a37-a1c9-a736cb2815d0",
 CellID->130135511]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[16564, 464, 222, 2, 40, "MathCaption",ExpressionUUID->"2e56b696-7921-4dd2-bf7d-0c15be4b3e70",
 CellID->579788294],
Cell[CellGroupData[{
Cell[16811, 470, 250, 5, 25, "Input",ExpressionUUID->"9e3189cf-1dac-4683-b068-aa39e4a347fe",
 CellID->8585758],
Cell[17064, 477, 213, 4, 24, "Output",ExpressionUUID->"4705ed4c-77f3-4d52-93c1-3e4e4dd55fb2",
 CellID->15928604]
}, Open  ]],
Cell[CellGroupData[{
Cell[17314, 486, 269, 5, 25, "Input",ExpressionUUID->"8d2cec3f-4b54-43fc-ae0e-c64bd1ae354a",
 CellID->1001352657],
Cell[17586, 493, 208, 4, 24, "Output",ExpressionUUID->"ed66c2d4-31f0-4bb5-ba5d-b990fa15b75b",
 CellID->555168197]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[17843, 503, 201, 2, 40, "MathCaption",ExpressionUUID->"8565d89a-3dc1-40ac-acd5-d801d217a040",
 CellID->210058381],
Cell[CellGroupData[{
Cell[18069, 509, 309, 6, 26, "Input",ExpressionUUID->"2de0fa28-d123-428b-b5e2-98d1c8625d06",
 CellID->3618976],
Cell[18381, 517, 295, 7, 25, "Output",ExpressionUUID->"94746ca0-d6f1-48e7-8278-248ff52f0647",
 CellID->60384182]
}, Open  ]],
Cell[CellGroupData[{
Cell[18713, 529, 265, 5, 25, "Input",ExpressionUUID->"660b225c-1422-4319-8e29-d30e3deb8688",
 CellID->158897045],
Cell[18981, 536, 259, 6, 24, "Output",ExpressionUUID->"601fecce-349c-4039-8f5b-2f1b74399bd6",
 CellID->90949083]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[19289, 548, 240, 4, 40, "MathCaption",ExpressionUUID->"2af08122-2b75-4880-a344-84d2102e1006",
 CellID->45747336],
Cell[CellGroupData[{
Cell[19554, 556, 261, 5, 25, "Input",ExpressionUUID->"66b70e28-e77a-447e-a23b-1b9e9d0d56eb",
 CellID->106947108],
Cell[19818, 563, 215, 4, 24, "Output",ExpressionUUID->"4c82f576-35b3-4c89-9dda-a2b8fadfdd98",
 CellID->688234202]
}, Open  ]],
Cell[CellGroupData[{
Cell[20070, 572, 266, 5, 25, "Input",ExpressionUUID->"4468754d-b339-4a2a-9d0d-4595095e64b6",
 CellID->289386853],
Cell[20339, 579, 210, 4, 24, "Output",ExpressionUUID->"48a35c84-046a-4567-9766-96920108ee49",
 CellID->383066580]
}, Open  ]],
Cell[CellGroupData[{
Cell[20586, 588, 266, 5, 25, "Input",ExpressionUUID->"d79fbaf0-27e6-49a8-aa49-3068b2ea26df",
 CellID->616336306],
Cell[20855, 595, 210, 4, 24, "Output",ExpressionUUID->"f29a22a9-3747-4e8f-b627-7b11e218ce82",
 CellID->287890430]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[21114, 605, 276, 5, 57, "MathCaption",ExpressionUUID->"58782be3-aee4-4688-9aa0-f67ced329f3f",
 CellID->657986846],
Cell[CellGroupData[{
Cell[21415, 614, 247, 4, 25, "Input",ExpressionUUID->"53397038-fd0e-4d9a-9edd-b596769b620d",
 CellID->3639185],
Cell[21665, 620, 9438, 256, 178, "Output",ExpressionUUID->"84c8a925-7c7f-43d1-9477-0b21d4c74fd7",
 CellID->781595662]
}, Open  ]],
Cell[CellGroupData[{
Cell[31140, 881, 311, 7, 25, "Input",ExpressionUUID->"b8a9ab4a-ca17-489b-a112-77b3eb665233",
 CellID->106876852],
Cell[31454, 890, 10549, 302, 413, "Output",ExpressionUUID->"c1912582-c320-4a31-a835-d77a09a1b203",
 CellID->78099367]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[42052, 1198, 193, 2, 40, "MathCaption",ExpressionUUID->"ea217606-4fc7-4ae5-b860-1a9d9c0c9bb4",
 CellID->201555096],
Cell[CellGroupData[{
Cell[42270, 1204, 363, 8, 25, "Input",ExpressionUUID->"7365682a-9352-4f44-8e92-8fa88547b46e",
 CellID->76274047],
Cell[42636, 1214, 20271, 632, 1044, "Output",ExpressionUUID->"d0cf1f2d-53e1-484a-9edc-173b312ec335",
 CellID->268218734]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[62956, 1852, 241, 4, 40, "MathCaption",ExpressionUUID->"193fd985-a1c8-4cb4-8049-61c540b24416",
 CellID->116384939],
Cell[CellGroupData[{
Cell[63222, 1860, 382, 8, 25, "Input",ExpressionUUID->"1650bdc2-d3dd-44d2-935a-cb0166afa61e",
 CellID->11721902],
Cell[63607, 1870, 9941, 335, 608, "Output",ExpressionUUID->"f3d6bc50-6c9c-40f3-bf12-4a151619f9cb",
 CellID->122696485]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[73597, 2211, 183, 2, 40, "MathCaption",ExpressionUUID->"86b94b57-eaac-4303-81af-a7050b4a3f0d",
 CellID->7379660],
Cell[CellGroupData[{
Cell[73805, 2217, 286, 5, 25, "Input",ExpressionUUID->"fc483901-d97e-4372-9f6a-9813c3022a4b",
 CellID->57152497],
Cell[74094, 2224, 9968, 336, 608, "Output",ExpressionUUID->"c5e71275-b015-4f09-85eb-6a48969472f9",
 CellID->99386605]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[84111, 2566, 254, 3, 40, "MathCaption",ExpressionUUID->"124a6d2d-ea42-451a-94ee-c679eb1ebe95",
 CellID->600024437],
Cell[CellGroupData[{
Cell[84390, 2573, 405, 9, 25, "Input",ExpressionUUID->"85f25a87-aaee-49ac-aec1-40dc56984d69",
 CellID->356384648],
Cell[84798, 2584, 9942, 335, 608, "Output",ExpressionUUID->"44758134-dc52-4f6e-9723-314aab58a870",
 CellID->51287920]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[94789, 2925, 206, 2, 40, "MathCaption",ExpressionUUID->"ef013166-4ead-44c5-b462-ff65ddc99d01",
 CellID->32533157],
Cell[CellGroupData[{
Cell[95020, 2931, 423, 9, 25, "Input",ExpressionUUID->"0416be1e-c919-43ec-aa1e-85469159a7b8",
 CellID->221488453],
Cell[95446, 2942, 9938, 335, 608, "Output",ExpressionUUID->"35e9dc97-64da-40ab-bf0d-b1170d95795f",
 CellID->44145120]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[105433, 3283, 200, 2, 40, "MathCaption",ExpressionUUID->"a2133ad2-2225-44aa-9f09-fb71192a71ea",
 CellID->441304007],
Cell[CellGroupData[{
Cell[105658, 3289, 357, 8, 25, "Input",ExpressionUUID->"a58c9ff8-287c-44c1-b668-5330c449eee6",
 CellID->784023909],
Cell[106018, 3299, 281, 6, 24, "Output",ExpressionUUID->"81941b3a-1333-4d5a-a4ac-58c4a01cf9cd",
 CellID->565604538]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[106348, 3311, 309, 6, 40, "MathCaption",ExpressionUUID->"5149010d-c608-4898-8767-cfd634db1877",
 CellID->48363548],
Cell[CellGroupData[{
Cell[106682, 3321, 407, 9, 25, "Input",ExpressionUUID->"0994fd9e-af71-478d-908d-4500620df444",
 CellID->265849720],
Cell[107092, 3332, 237, 5, 24, "Output",ExpressionUUID->"affd3fdf-d9ac-416c-862d-47ff1e8b97d6",
 CellID->36210837]
}, Open  ]],
Cell[CellGroupData[{
Cell[107366, 3342, 424, 10, 25, "Input",ExpressionUUID->"fd7a6e53-b654-4cbc-b5ee-9f48f9ec5f56",
 CellID->10018807],
Cell[107793, 3354, 196, 3, 24, "Output",ExpressionUUID->"e76d88ee-cf9e-4426-9e7b-7134e41378e3",
 CellID->90942833]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[108038, 3363, 215, 2, 40, "MathCaption",ExpressionUUID->"7d92d8c6-2ea7-4ba0-8219-43584f030b73",
 CellID->222360495],
Cell[108256, 3367, 590, 14, 43, "Input",ExpressionUUID->"82beeeb9-2a8c-4463-af42-1005bc5440b5",
 CellID->876159263]
}, Open  ]],
Cell[CellGroupData[{
Cell[108883, 3386, 184, 2, 40, "MathCaption",ExpressionUUID->"bb3a1f82-6483-45e6-bf09-9be803a1b346",
 CellID->140693972],
Cell[CellGroupData[{
Cell[109092, 3392, 358, 6, 25, "Input",ExpressionUUID->"d8f63307-e67d-4fc8-a97d-402c45b59692",
 CellID->676058770],
Cell[109453, 3400, 222, 4, 24, "Output",ExpressionUUID->"eea12d2b-f043-46fd-85dd-2cbf4f625467",
 CellID->173651887]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[109724, 3410, 239, 4, 40, "MathCaption",ExpressionUUID->"9acb1795-a990-4a13-8873-c90e28be41a8",
 CellID->362701572],
Cell[CellGroupData[{
Cell[109988, 3418, 1016, 28, 61, "Input",ExpressionUUID->"19d0214e-62ae-45d5-aa1b-60302fc7b9e9",
 CellID->569912814],
Cell[111007, 3448, 10198, 199, 53, "Output",ExpressionUUID->"a2d3cb23-f362-4b5c-a1bc-da580aaa66bf",
 CellID->466247083]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[121254, 3653, 222, 2, 40, "MathCaption",ExpressionUUID->"97132d86-e5d0-45e3-802f-58f9f0f39315",
 CellID->860484422],
Cell[CellGroupData[{
Cell[121501, 3659, 393, 9, 25, "Input",ExpressionUUID->"add0c371-31b9-4367-bc72-eb4c040e00e9",
 CellID->200160651],
Cell[121897, 3670, 256, 5, 24, "Output",ExpressionUUID->"167bdd41-fd93-47ac-ab49-db1c26338de0",
 CellID->5616810]
}, Open  ]]
}, Open  ]],
Cell[122180, 3679, 438, 11, 96, "DefinitionBox",ExpressionUUID->"3a120140-9199-49e4-9455-dd2ea9fc8376",
 CellID->771150938],
Cell[122621, 3692, 98, 1, 30, "Caption",ExpressionUUID->"f5f60007-c978-4515-b0ad-835ba5ae7d46",
 CellID->56681674],
Cell[CellGroupData[{
Cell[122744, 3697, 102, 1, 40, "MathCaption",ExpressionUUID->"8cfa9254-3dcb-4f06-b363-a79c3c589855",
 CellID->135753386],
Cell[CellGroupData[{
Cell[122871, 3702, 127, 2, 25, "Input",ExpressionUUID->"95b13454-664a-49ef-b319-51b599fe4560",
 CellID->49790133],
Cell[123001, 3706, 129, 2, 24, "Output",ExpressionUUID->"291a9438-7152-4128-85b7-ac77dd1cf2b8",
 CellID->380375781]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[123191, 3715, 191, 2, 74, "TutorialMoreAboutSection",ExpressionUUID->"76801787-5f70-41d3-a497-142c85e4f5f5",
 CellID->161772049],
Cell[123385, 3719, 107, 1, 24, "TutorialMoreAbout",ExpressionUUID->"293b3931-85af-4829-9e80-7b6c6a37d4eb",
 CellID->67989278]
}, Open  ]],
Cell[CellGroupData[{
Cell[123529, 3725, 128, 1, 74, "RelatedTutorialsSection",ExpressionUUID->"b843fff2-33d9-4c3f-83b8-39883e476e35",
 CellID->183639716],
Cell[123660, 3728, 106, 1, 24, "RelatedTutorials",ExpressionUUID->"3ca477f5-83dd-45cf-97d5-2f16fcf8c0a1",
 CellID->29667343]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[123815, 3735, 110, 1, 72, "MetadataSection",ExpressionUUID->"f70824db-8bb0-4d0d-a14e-72f55559f5eb",
 CellID->213044136],
Cell[123928, 3738, 472, 11, 26, "History",ExpressionUUID->"1fbf2634-130c-4a42-b1fd-588c4e7a8f5b",
 CellID->72794903],
Cell[CellGroupData[{
Cell[124425, 3753, 122, 1, 21, "CategorizationSection",ExpressionUUID->"1aa13a2a-d527-4b88-a6f6-f464858515fe",
 CellID->385949988],
Cell[124550, 3756, 137, 2, 70, "Categorization",ExpressionUUID->"ae94e6e3-6a49-4d7e-bb24-26a709fea1f8",
 CellID->509057587],
Cell[124690, 3760, 169, 2, 70, "Categorization",ExpressionUUID->"c05029b2-5853-47e8-8989-2c88539ca3a9",
 CellID->519804101],
Cell[124862, 3764, 166, 2, 70, "Categorization",ExpressionUUID->"44216c23-99d0-4901-8e9a-cf8468fac854",
 CellID->392509224],
Cell[125031, 3768, 200, 4, 70, "Categorization",ExpressionUUID->"764c4ddd-b0e0-480f-80bd-532b6aa0f96f",
 CellID->22346959]
}, Closed]],
Cell[CellGroupData[{
Cell[125268, 3777, 110, 1, 21, "KeywordsSection",ExpressionUUID->"bf86c44b-4960-45b2-b08f-b5f2b7bff7e6",
 CellID->426123361],
Cell[125381, 3780, 99, 1, 70, "Keywords",ExpressionUUID->"196dd428-ec9d-4b25-82c2-5e89d985bbff",
 CellID->393918541]
}, Closed]]
}, Open  ]]
}
]
*)

