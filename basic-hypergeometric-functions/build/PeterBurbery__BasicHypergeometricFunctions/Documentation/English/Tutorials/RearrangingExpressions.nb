(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    120556,       3642]
NotebookOptionsPosition[    109117,       3397]
NotebookOutlinePosition[    111671,       3459]
CellTagsIndexPosition[    111628,       3456]
WindowTitle->Rearranging Expressions
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell[
          "PETER BURBERY/ BASIC HYPERGEOMETRIC FUNCTIONS TECH NOTE", 
           "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "ccced14e-014e-4e50-bca9-a99998a3f457"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "190394df-7533-4c5b-bea5-e1b2862443b2"],
        Background->RGBColor[
         0.3843137254901961, 0.4627450980392157, 0.7019607843137254],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[Cell[BoxData[
     TagBox[
      ActionMenuBox[
       FrameBox[Cell[TextData[{
         "URL",
         " ",
         Cell[BoxData[
          GraphicsBox[
           {GrayLevel[0.66667], Thickness[0.13], 
            LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
           AspectRatio->1,
           ImageSize->20,
           PlotRange->{{-3, 4}, {-1, 1}}]],ExpressionUUID->
          "fcd05bd6-f1e4-44c8-95ab-d03ccf8b74b3"]
        }],ExpressionUUID->"07a33cdc-e60b-4ccf-8b03-82c7643bd7a8"],
        StripOnInput->False],{
       "\"PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions\"" :> None, 
        "\"Copy Wolfram Documentation Center URL\"" :> 
        Module[{DocumentationSearch`Private`nb$}, 
          DocumentationSearch`Private`nb$ = 
           NotebookPut[
            Notebook[{
              Cell["PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions"]}, Visible -> False]]; 
          SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
          FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
          NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
        "\"Copy web URL\"" :> 
        Module[{DocumentationSearch`Private`nb$}, 
          DocumentationSearch`Private`nb$ = 
           NotebookPut[
            Notebook[{
              Cell[BoxData[
                MakeBoxes[
                 Hyperlink[
                  "http://reference.wolfram.com/language/PeterBurbery/\
BasicHypergeometricFunctions/tutorial/RearrangingExpressions.html"], 
                  StandardForm]], "Input", TextClipboardType -> "PlainText"]},
               Visible -> False]]; 
          SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
          FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
          NotebookClose[DocumentationSearch`Private`nb$]; Null], 
        "\"Go to web URL\"" :> 
        FrontEndExecute[{
          NotebookLocate[{
            URL[If[TrueQ[DocumentationBuild`Make`Private`wsmlinkQ$102938], 
                "http://reference.wolfram.com/system-modeler/", 
                "http://reference.wolfram.com/language/"] <> 
              "PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions" <> ".html"], None}]}]},
       Appearance->None,
       MenuAppearance->Automatic,
       MenuStyle->"URLMenu"],
      MouseAppearanceTag["LinkHand"]]],
     LineSpacing->{1.4, 0},ExpressionUUID->
     "4ad32334-b6b4-4708-bab2-ae4b2708dade"]], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "4a010eb5-b104-4da9-bc70-7dff6557b014"]}
  }]], "AnchorBarGrid",
 GridBoxOptions->{GridBoxItemSize->{"Columns" -> {
     Scaled[0.65], {
      Scaled[0.34]}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
   "RowsIndexed" -> {}}},
 CellID->1,ExpressionUUID->"8f6dddb1-fe45-4607-9f15-83212077dc2c"],

Cell[CellGroupData[{

Cell["Rearranging Expressions", "TechNoteTitle",
 CellID->555292541,ExpressionUUID->"4392a549-f5bc-4eed-86cd-bd4f56abb022"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{
      Cell["Put Q in the front"], 
      "paclet:PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions#2591", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited, StripOnInput -> False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited, StripOnInput -> False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}], 
    TemplateBox[{
      Cell["Rearranging"], 
      "paclet:PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions#237748664", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited, StripOnInput -> False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited, StripOnInput -> False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}]}
  }]], "TechNoteJumpBox",ExpressionUUID->"ac89d5e8-3e64-4478-a8e3-\
ff2c0f323635"],

Cell[TextData[{
 "The functions defined in the ",
 Cell[BoxData["PeterBurbery`BasicHypergeometricFunctions`"], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "33d3b121-2af1-420b-8d3c-d9ff2a4461b4"],
 " context provide support for placing the q in front."
}], "TechNoteText",
 CellID->34242218,ExpressionUUID->"da171d77-9ecf-45b9-aa05-d6d9041a939a"],

Cell["This loads the package:", "TechNoteMathCaption",
 CellID->513850824,ExpressionUUID->"7bada169-7c3d-4776-b7f7-9de2435b9070"],

Cell[BoxData[
 RowBox[{"<<", "PeterBurbery`BasicHypergeometricFunctions`"}]], "Input",
 CellLabel->"In[9]:=",
 CellID->542855510,ExpressionUUID->"0dee9fdd-35d3-4720-adb9-0ac50b09f781"],

Cell[CellGroupData[{

Cell["Put Q in the front", "TechNoteSection",
 CellID->2591,ExpressionUUID->"e289c6af-e7f4-4b1c-818e-9eda6dd9cb82"],

Cell["\<\
The built-in function PositionQInFrontOfList puts q in front of a list. The \
function works by using UnsortedComplement.\
\>", "TechNoteText",
 CellID->590619292,ExpressionUUID->"b612293d-b26c-4a4f-9c16-0ee176d43931"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"PositionQInFrontOfList", "[", 
  RowBox[{"{", 
   RowBox[{"b", ",", "c", ",", "d", ",", "q", ",", "f", ",", "q"}], "}"}], 
  "]"}]], "Input",
 CellLabel->"In[10]:=",
 CellID->219423307,ExpressionUUID->"c005b7de-a8c7-45df-9f11-f64113601e19"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"q", ",", "q", ",", "b", ",", "c", ",", "d", ",", "f"}], 
  "}"}]], "Output",
 CellLabel->"Out[10]=",
 CellID->272831206,ExpressionUUID->"9e37fe5e-f82a-4f84-a340-a0975f379d0a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Rearranging", "TechNoteSection",
 CellID->237748664,ExpressionUUID->"00036f6a-63fd-4f4f-a2de-66a749e3d47c"],

Cell["This is the expression tree of a a b s a s q s d \
s\[NonBreakingSpace]d:", "TechNoteMathCaption",
 CellID->30906755,ExpressionUUID->"e250cd9f-9b0e-4e7b-8c8b-dd8939ecf38b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"exampleInput", "=", 
  RowBox[{
  "a", " ", "b", " ", "s", " ", "a", " ", "s", " ", "q", " ", "s", " ", "d", 
   " ", "s", " ", "d"}]}]], "Input",
 CellLabel->"In[12]:=",
 CellID->501709717,ExpressionUUID->"1542516c-d21f-43bc-a96f-434c0b7c4782"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["a", "2"], " ", "b", " ", 
  SuperscriptBox["d", "2"], " ", "q", " ", 
  SuperscriptBox["s", "4"]}]], "Output",
 CellLabel->"Out[12]=",
 CellID->227264227,ExpressionUUID->"5ce1d3a9-dcd7-4e75-9690-197784b36a5a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ExpressionTree", "[", "exampleInput", "]"}]], "Input",
 CellLabel->"In[13]:=",
 CellID->45907700,ExpressionUUID->"afa7c4e4-7e9c-42d8-8885-a887ef7faee4"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Trees",
   DynamicModuleBox[{Typeset`tree = HoldComplete[
     Tree[Times, {
       Tree[Power, {
         Tree[$CellContext`a, None], 
         Tree[2, None]}], 
       Tree[$CellContext`b, None], 
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}], 
       Tree[$CellContext`q, None], 
       Tree[Power, {
         Tree[$CellContext`s, None], 
         Tree[4, None]}]}]]}, 
    NamespaceBox[{
      {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         0.3496029493900505, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         1.0488088481701514`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         1.7480147469502525`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         2.4472206457303534`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 1.5148043949059136`}, {
         3.1464265445104544`, 0.7574021974529568}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.3496029493900505, 0.7574021974529568}, {0., 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.3496029493900505, 0.7574021974529568}, {0.699205898780101,
          0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 0.7574021974529568}, {
         1.398411797560202, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7480147469502525`, 0.7574021974529568}, {
         2.097617696340303, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1464265445104544`, 0.7574021974529568}, {
         2.796823595120404, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1464265445104544`, 0.7574021974529568}, {
         3.496029493900505, 0.}}]}}, 
      {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
       TagBox[InsetBox[
         FrameBox["Times",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7480147469502525, 1.5148043949059136}],
        "DynamicName",
        BoxID -> "VertexID$1"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {0.3496029493900505, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$2"], 
       TagBox[InsetBox[
         FrameBox["a",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0., 0.}],
        "DynamicName",
        BoxID -> "VertexID$3"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0.699205898780101, 0.}],
        "DynamicName",
        BoxID -> "VertexID$4"], 
       TagBox[InsetBox[
         FrameBox["b",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.0488088481701514, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$5"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7480147469502525, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$6"], 
       TagBox[InsetBox[
         FrameBox["d",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.398411797560202, 0.}],
        "DynamicName",
        BoxID -> "VertexID$7"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.097617696340303, 0.}],
        "DynamicName",
        BoxID -> "VertexID$8"], 
       TagBox[InsetBox[
         FrameBox["q",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.4472206457303534, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$9"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {3.1464265445104544, 0.7574021974529568}],
        "DynamicName",
        BoxID -> "VertexID$10"], 
       TagBox[InsetBox[
         FrameBox["s",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.796823595120404, 0.}],
        "DynamicName",
        BoxID -> "VertexID$11"], 
       TagBox[InsetBox[
         FrameBox["4",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {3.496029493900505, 0.}],
        "DynamicName",
        BoxID -> "VertexID$12"]}}]]],
  AlignmentPoint->Center,
  Axes->False,
  AxesLabel->None,
  AxesOrigin->Automatic,
  AxesStyle->{},
  Background->None,
  BaseStyle->{},
  BaselinePosition->Automatic,
  ContentSelectable->Automatic,
  DefaultBaseStyle->"TreeGraphics",
  Epilog->{},
  FormatType->StandardForm,
  Frame->False,
  FrameLabel->None,
  FrameStyle->{},
  FrameTicks->None,
  FrameTicksStyle->{},
  GridLines->None,
  GridLinesStyle->{},
  ImageMargins->0.,
  ImagePadding->All,
  ImageSize->Automatic,
  LabelStyle->{},
  PlotLabel->None,
  PlotRange->All,
  PlotRangeClipping->False,
  PlotRangePadding->Automatic,
  PlotRegion->Automatic,
  Prolog->{},
  RotateLabel->True,
  Ticks->Automatic,
  TicksStyle->{}]], "Output",
 CellLabel->"Out[13]=",
 CellID->43000966,ExpressionUUID->"f7a7b257-1130-4058-8645-df2afcda5d32"]
}, Open  ]],

Cell["\<\
We want to put q in the front. We need to verify q is in the expression first:\
\>", "TechNoteMathCaption",
 CellID->340949841,ExpressionUUID->"f8838af4-b20d-4ec5-a66f-f7d8b078f083"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"exampleInput", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[14]:=",
 CellID->152984908,ExpressionUUID->"3ffb77c4-590c-4ead-a50c-cb1b18c855f9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", "4", "}"}], "}"}]], "Output",
 CellLabel->"Out[14]=",
 CellID->63383656,ExpressionUUID->"9b5fba77-ff3f-47e9-95f9-f7f310b9adb5"]
}, Open  ]],

Cell["An expression without q would have a different output.", \
"TechNoteMathCaption",
 CellID->579788294,ExpressionUUID->"2e56b696-7921-4dd2-bf7d-0c15be4b3e70"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"expressionWithNoQ", "=", 
  RowBox[{"b", " ", "d"}]}]], "Input",
 CellLabel->"In[15]:=",
 CellID->8585758,ExpressionUUID->"9e3189cf-1dac-4683-b068-aa39e4a347fe"],

Cell[BoxData[
 RowBox[{"b", " ", "d"}]], "Output",
 CellLabel->"Out[15]=",
 CellID->460763986,ExpressionUUID->"b5916929-e2a3-46c4-bf9e-c2aca0de6b8c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"expressionWithNoQ", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[16]:=",
 CellID->1001352657,ExpressionUUID->"8d2cec3f-4b54-43fc-ae0e-c64bd1ae354a"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellLabel->"Out[16]=",
 CellID->16490087,ExpressionUUID->"a6d97a4e-7815-4021-af0e-b41e8e7c3949"]
}, Open  ]],

Cell["The q could be raised to a power:", "TechNoteMathCaption",
 CellID->210058381,ExpressionUUID->"8565d89a-3dc1-40ac-acd5-d801d217a040"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qraisedtothepower", "=", 
  RowBox[{"b", " ", "d", " ", 
   SuperscriptBox["q", "2"], " ", "d", " ", "b"}]}]], "Input",
 CellLabel->"In[17]:=",
 CellID->3618976,ExpressionUUID->"2de0fa28-d123-428b-b5e2-98d1c8625d06"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["b", "2"], " ", 
  SuperscriptBox["d", "2"], " ", 
  SuperscriptBox["q", "2"]}]], "Output",
 CellLabel->"Out[17]=",
 CellID->61579599,ExpressionUUID->"58592733-54e0-4d30-94a9-3da47c44295c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", 
  RowBox[{"qraisedtothepower", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[18]:=",
 CellID->158897045,ExpressionUUID->"660b225c-1422-4319-8e29-d30e3deb8688"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"3", ",", "1"}], "}"}], "}"}]], "Output",
 CellLabel->"Out[18]=",
 CellID->4430423,ExpressionUUID->"2f122f61-1ef2-46f0-9389-554e45070651"]
}, Open  ]],

Cell["\<\
Let's look at these three examples from the perspective of Cases:\
\>", "TechNoteMathCaption",
 CellID->45747336,ExpressionUUID->"2af08122-2b75-4880-a344-84d2102e1006"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"exampleInput", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[19]:=",
 CellID->106947108,ExpressionUUID->"66b70e28-e77a-447e-a23b-1b9e9d0d56eb"],

Cell[BoxData[
 RowBox[{"{", "q", "}"}]], "Output",
 CellLabel->"Out[19]=",
 CellID->17869975,ExpressionUUID->"fe8b0a84-f99e-464c-a8f1-06ec8703fc89"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"expressionWithNoQ", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[20]:=",
 CellID->289386853,ExpressionUUID->"4468754d-b339-4a2a-9d0d-4595095e64b6"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellLabel->"Out[20]=",
 CellID->884702477,ExpressionUUID->"bc2202ab-62f1-421b-b74e-ee33964fb58b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Cases", "[", 
  RowBox[{"qraisedtothepower", ",", "q"}], "]"}]], "Input",
 CellLabel->"In[21]:=",
 CellID->616336306,ExpressionUUID->"d79fbaf0-27e6-49a8-aa49-3068b2ea26df"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellLabel->"Out[21]=",
 CellID->4026612,ExpressionUUID->"36406cd8-801d-4b3d-beef-cb79da63db25"]
}, Open  ]],

Cell["\<\
The last example should have something, but q is on a higher level. Let's \
look at the expression tree.\
\>", "TechNoteMathCaption",
 CellID->657986846,ExpressionUUID->"58782be3-aee4-4688-9aa0-f67ced329f3f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}]], "Input",
 CellLabel->"In[22]:=",
 CellID->3639185,ExpressionUUID->"53397038-fd0e-4d9a-9edd-b596769b620d"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Trees",
   DynamicModuleBox[{Typeset`tree = HoldComplete[
     Tree[Times, {
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}], 
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}], 
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]}]]}, 
    NamespaceBox[{
      {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         0.34874291623145787`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         1.7437145811572892`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 1.5111053108157988`}, {
         3.1386862460831204`, 0.7555526554078994}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.34874291623145787`, 0.7555526554078994}, {0., 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{0.34874291623145787`, 0.7555526554078994}, {
         0.6974858324629157, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 0.7555526554078994}, {
         1.3949716649258315`, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{1.7437145811572892`, 0.7555526554078994}, {
         2.092457497388747, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1386862460831204`, 0.7555526554078994}, {
         2.789943329851663, 0.}}]}, 
       {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
        AbsoluteThickness[1], 
        LineBox[{{3.1386862460831204`, 0.7555526554078994}, {
         3.4874291623145783`, 0.}}]}}, 
      {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
       TagBox[InsetBox[
         FrameBox["Times",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7437145811572892, 1.5111053108157988}],
        "DynamicName",
        BoxID -> "VertexID$1"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {0.34874291623145787, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$2"], 
       TagBox[InsetBox[
         FrameBox["b",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0., 0.}],
        "DynamicName",
        BoxID -> "VertexID$3"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {0.6974858324629157, 0.}],
        "DynamicName",
        BoxID -> "VertexID$4"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {1.7437145811572892, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$5"], 
       TagBox[InsetBox[
         FrameBox["d",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {1.3949716649258315, 0.}],
        "DynamicName",
        BoxID -> "VertexID$6"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.092457497388747, 0.}],
        "DynamicName",
        BoxID -> "VertexID$7"], 
       TagBox[InsetBox[
         FrameBox["Power",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->4,
          StripOnInput->False], {3.1386862460831204, 0.7555526554078994}],
        "DynamicName",
        BoxID -> "VertexID$8"], 
       TagBox[InsetBox[
         FrameBox["q",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {2.789943329851663, 0.}],
        "DynamicName",
        BoxID -> "VertexID$9"], 
       TagBox[InsetBox[
         FrameBox["2",
          Background->Directive[
            RGBColor[
            0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
          BaseStyle->GrayLevel[0],
          FrameMargins->{{2, 2}, {1, 1}},
          FrameStyle->Directive[
            RGBColor[
            0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
            AbsoluteThickness[1], 
            Opacity[1]],
          ImageSize->Automatic,
          RoundingRadius->0,
          StripOnInput->False], {3.4874291623145783, 0.}],
        "DynamicName",
        BoxID -> "VertexID$10"]}}]]],
  AlignmentPoint->Center,
  Axes->False,
  AxesLabel->None,
  AxesOrigin->Automatic,
  AxesStyle->{},
  Background->None,
  BaseStyle->{},
  BaselinePosition->Automatic,
  ContentSelectable->Automatic,
  DefaultBaseStyle->"TreeGraphics",
  Epilog->{},
  FormatType->StandardForm,
  Frame->False,
  FrameLabel->None,
  FrameStyle->{},
  FrameTicks->None,
  FrameTicksStyle->{},
  GridLines->None,
  GridLinesStyle->{},
  ImageMargins->0.,
  ImagePadding->All,
  ImageSize->Automatic,
  LabelStyle->{},
  PlotLabel->None,
  PlotRange->All,
  PlotRangeClipping->False,
  PlotRangePadding->Automatic,
  PlotRegion->Automatic,
  Prolog->{},
  RotateLabel->True,
  Ticks->Automatic,
  TicksStyle->{}]], "Output",
 CellLabel->"Out[22]=",
 CellID->35599521,ExpressionUUID->"02fe16fe-6ea1-47fb-b157-5af0c139996a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", "1"}], 
  "]"}]], "Input",
 CellLabel->"In[23]:=",
 CellID->106876852,ExpressionUUID->"b8a9ab4a-ca17-489b-a112-77b3eb665233"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[23]=",
 CellID->380757827,ExpressionUUID->"74d6cd85-637a-4f17-85c0-da831feaf9d7"]
}, Open  ]],

Cell["q is on the second level:", "TechNoteMathCaption",
 CellID->201555096,ExpressionUUID->"ea217606-4fc7-4ae5-b860-1a9d9c0c9bb4"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", "2"}], 
  "]"}]], "Input",
 CellLabel->"In[24]:=",
 CellID->76274047,ExpressionUUID->"7365682a-9352-4f44-8e92-8fa88547b46e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`b, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`d, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[Power, {
         Tree[$CellContext`q, None], 
         Tree[2, None]}]]}, 
      NamespaceBox[{
        {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {0., 0.}}]}, 
         {RGBColor[0.6, 0.5882352941176471, 0.5529411764705883], 
          AbsoluteThickness[1], 
          LineBox[{{0.4472135954999579, 0.8929961074943159}, {
           0.8944271909999159, 0.}}]}}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["Power",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->4,
            StripOnInput->False], {0.4472135954999579, 0.8929961074943159}],
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0., 0.}],
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {0.8944271909999159, 0.}],
          "DynamicName",
          BoxID -> "VertexID$3"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->Automatic,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[24]=",
 CellID->200297245,ExpressionUUID->"783eaae8-3c67-40f5-b198-98181b398079"]
}, Open  ]],

Cell["\<\
We might want just level 2 and not the subtrees. We can specify this:\
\>", "TechNoteMathCaption",
 CellID->116384939,ExpressionUUID->"193fd985-a1c8-4cb4-8049-61c540b24416"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   RowBox[{"{", "2", "}"}]}], "]"}]], "Input",
 CellLabel->"In[25]:=",
 CellID->11721902,ExpressionUUID->"1650bdc2-d3dd-44d2-935a-cb0166afa61e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[25]=",
 CellID->436036227,ExpressionUUID->"fe4497d2-b4a0-45e8-a12b-2d65fa561b8d"]
}, Open  ]],

Cell["q is in the leaves:", "TechNoteMathCaption",
 CellID->7379660,ExpressionUUID->"86b94b57-eaac-4303-81af-a7050b4a3f0d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLeaves", "[", 
  RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], "]"}]], "Input",
 CellLabel->"In[28]:=",
 CellID->57152497,ExpressionUUID->"fc483901-d97e-4372-9f6a-9813c3022a4b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[28]=",
 CellID->785266654,ExpressionUUID->"306f88c8-9ee8-4934-b8e9-caa547808962"]
}, Open  ]],

Cell["We can also use -1 level specification:", "TechNoteMathCaption",
 CellID->600024437,ExpressionUUID->"124a6d2d-ea42-451a-94ee-c679eb1ebe95"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeLevel", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"-", "1"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[29]:=",
 CellID->356384648,ExpressionUUID->"85f25a87-aaee-49ac-aec1-40dc56984d69"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[29]=",
 CellID->446846364,ExpressionUUID->"166b99f3-9b10-48f5-9088-949ae3cdcc92"]
}, Open  ]],

Cell["Another way to get q is with TreeLeafQ:", "TechNoteMathCaption",
 CellID->32533157,ExpressionUUID->"ef013166-4ead-44c5-b462-ff65ddc99d01"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeSelect", "[", 
  RowBox[{
   RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
   "TreeLeafQ"}], "]"}]], "Input",
 CellLabel->"In[30]:=",
 CellID->221488453,ExpressionUUID->"0416be1e-c919-43ec-aa1e-85469159a7b8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`b, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["b",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`d, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["d",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[$CellContext`q, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["q",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}], ",", 
   GraphicsBox[
    NamespaceBox["Trees",
     DynamicModuleBox[{Typeset`tree = HoldComplete[
       Tree[2, None]]}, 
      NamespaceBox[{{}, 
        {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], 
         TagBox[InsetBox[
           FrameBox["2",
            Background->Directive[
              RGBColor[
              0.9607843137254902, 0.9882352941176471, 0.9764705882352941]],
            BaseStyle->GrayLevel[0],
            FrameMargins->{{2, 2}, {1, 1}},
            FrameStyle->Directive[
              RGBColor[
              0.4196078431372549, 0.6313725490196078, 0.4196078431372549], 
              AbsoluteThickness[1], 
              Opacity[1]],
            ImageSize->Automatic,
            RoundingRadius->0,
            StripOnInput->False], {1., 1.}],
          "DynamicName",
          BoxID -> "VertexID$1"]}}]]],
    AlignmentPoint->Center,
    Axes->False,
    AxesLabel->None,
    AxesOrigin->Automatic,
    AxesStyle->{},
    Background->None,
    BaseStyle->{},
    BaselinePosition->Automatic,
    ContentSelectable->Automatic,
    DefaultBaseStyle->"TreeGraphics",
    Epilog->{},
    FormatType->StandardForm,
    Frame->False,
    FrameLabel->None,
    FrameStyle->{},
    FrameTicks->None,
    FrameTicksStyle->{},
    GridLines->None,
    GridLinesStyle->{},
    ImageMargins->0.,
    ImagePadding->All,
    ImageSize->Automatic,
    LabelStyle->{},
    PlotLabel->None,
    PlotRange->All,
    PlotRangeClipping->False,
    PlotRangePadding->0.1,
    PlotRegion->Automatic,
    Prolog->{},
    RotateLabel->True,
    Ticks->Automatic,
    TicksStyle->{}]}], "}"}]], "Output",
 CellLabel->"Out[30]=",
 CellID->166436640,ExpressionUUID->"00092154-f75d-4482-af59-72a7fe82ead0"]
}, Open  ]],

Cell["We can get the data with TreeData:", "TechNoteMathCaption",
 CellID->441304007,ExpressionUUID->"a2133ad2-2225-44aa-9f09-fb71192a71ea"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeData", "/@", 
  RowBox[{"TreeSelect", "[", 
   RowBox[{
    RowBox[{"ExpressionTree", "[", "qraisedtothepower", "]"}], ",", 
    "TreeLeafQ"}], "]"}]}]], "Input",
 CellLabel->"In[31]:=",
 CellID->784023909,ExpressionUUID->"a58c9ff8-287c-44c1-b668-5330c449eee6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"b", ",", "2", ",", "d", ",", "2", ",", "q", ",", "2"}], 
  "}"}]], "Output",
 CellLabel->"Out[31]=",
 CellID->55707303,ExpressionUUID->"59bb91e8-ebe7-40fc-907f-af9cfa3d25a3"]
}, Open  ]],

Cell["\<\
If q is in the expression, then q will be in this list. Otherwise it will not \
be.\
\>", "TechNoteMathCaption",
 CellID->48363548,ExpressionUUID->"5149010d-c608-4898-8767-cfd634db1877"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TreeData", "/@", 
  RowBox[{"TreeSelect", "[", 
   RowBox[{
    RowBox[{"ExpressionTree", "[", "expressionWithNoQ", "]"}], ",", 
    "TreeLeafQ"}], "]"}]}]], "Input",
 CellLabel->"In[32]:=",
 CellID->265849720,ExpressionUUID->"0994fd9e-af71-478d-908d-4500620df444"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"b", ",", "d"}], "}"}]], "Output",
 CellLabel->"Out[32]=",
 CellID->23619359,ExpressionUUID->"b737de54-9ca7-48c8-8352-9765952fd8d6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MemberQ", "[", 
  RowBox[{
   RowBox[{"TreeData", "/@", 
    RowBox[{"TreeSelect", "[", 
     RowBox[{
      RowBox[{"ExpressionTree", "[", "expressionWithNoQ", "]"}], ",", 
      "TreeLeafQ"}], "]"}]}], ",", "q"}], "]"}]], "Input",
 CellLabel->"In[33]:=",
 CellID->10018807,ExpressionUUID->"fd7a6e53-b654-4cbc-b5ee-9f48f9ec5f56"],

Cell[BoxData["False"], "Output",
 CellLabel->"Out[33]=",
 CellID->37584096,ExpressionUUID->"69d6f3c2-6774-4536-a874-a32ecdb99241"]
}, Open  ]],

Cell["XXXX.", "TechNoteCaption",
 CellID->56681674,ExpressionUUID->"f5f60007-c978-4515-b0ad-835ba5ae7d46"],

Cell[CellGroupData[{

Cell[BoxData["XXXX"], "Input",
 CellLabel->"In[1]:=",
 CellID->49790133,ExpressionUUID->"95b13454-664a-49ef-b319-51b599fe4560"],

Cell[BoxData["XXXX"], "Output",
 CellLabel->"Out[1]=",
 CellID->380375781,ExpressionUUID->"291a9438-7152-4128-85b7-ac77dd1cf2b8"]
}, Open  ]],

Cell[BoxData[""], "Input",ExpressionUUID->"119513f6-777f-4970-8a84-019e6028cdf9"],

Cell[BoxData[""], "Input",ExpressionUUID->"9a333c3b-885a-422d-91a9-f103c30136a5"]
}, Open  ]]
}, Open  ]],

Cell[" ", "FooterCell",ExpressionUUID->"ca0cb801-7c10-47bd-87ca-61d8797070e8"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 604.8},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"Rearranging Expressions",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, "ExampleSection" -> {"0" -> Open}}, 
  "NewStyles" -> True, "CitationPopupData" -> {$Failed, ""}, "ShowCitation" -> 
  False, "RootCaptions" -> "", 
  "Metadata" -> {
   "built" -> "{2023, 6, 5, 12, 7, 14.4476968}", 
    "history" -> {"XX", "", "", ""}, "context" -> 
    "PeterBurbery`BasicHypergeometricFunctions`", "keywords" -> {}, 
    "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> True,
     "label" -> "Peter Burbery/ Basic Hypergeometric Functions Tech Note", 
    "language" -> "en", "paclet" -> 
    "PeterBurbery/BasicHypergeometricFunctions", "status" -> "None", 
    "summary" -> 
    "The functions defined in the PeterBurbery`BasicHypergeometricFunctions` \
context provide support for placing the q in front. The built-in function \
PositionQInFrontOfList puts q in front of a list. The function works by using \
UnsortedComplement.", "synonyms" -> {}, "tabletags" -> 
    DocumentationBuild`Make`Private`tabletaggingrules$102908, "title" -> 
    "Rearranging Expressions", "titlemodifier" -> "", "metadescription" -> "",
     "windowtitle" -> "Rearranging Expressions", "type" -> "Tech Note", "uri" -> 
    "PeterBurbery/BasicHypergeometricFunctions/tutorial/\
RearrangingExpressions"}},
FrontEndVersion->"13.3 for Microsoft Windows (64-bit) (May 18, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> Notebook], 
   Cell[
    StyleData["Output"], CellContext -> Notebook], 
   Cell[
    StyleData["TutorialMoreAboutSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}], 
   Cell[
    StyleData["RelatedTutorialsSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}], 
   Cell[
    StyleData["TutorialRelatedLinksSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}]}, Visible -> False, 
  FrontEndVersion -> "13.3 for Microsoft Windows (64-bit) (May 18, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"62e78a3d-3a74-47db-a4b9-fa455d80938a"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[595, 21, 3665, 85, 56, "AnchorBarGrid",ExpressionUUID->"8f6dddb1-fe45-4607-9f15-83212077dc2c",
 CellID->1],
Cell[CellGroupData[{
Cell[4285, 110, 123, 1, 68, "TechNoteTitle",ExpressionUUID->"4392a549-f5bc-4eed-86cd-bd4f56abb022",
 CellID->555292541],
Cell[4411, 113, 1881, 43, 65, "TechNoteJumpBox",ExpressionUUID->"ac89d5e8-3e64-4478-a8e3-ff2c0f323635"],
Cell[6295, 158, 369, 7, 36, "TechNoteText",ExpressionUUID->"da171d77-9ecf-45b9-aa05-d6d9041a939a",
 CellID->34242218],
Cell[6667, 167, 129, 1, 36, "TechNoteMathCaption",ExpressionUUID->"7bada169-7c3d-4776-b7f7-9de2435b9070",
 CellID->513850824],
Cell[6799, 170, 184, 3, 26, "Input",ExpressionUUID->"0dee9fdd-35d3-4720-adb9-0ac50b09f781",
 CellID->542855510],
Cell[CellGroupData[{
Cell[7008, 177, 115, 1, 80, "TechNoteSection",ExpressionUUID->"e289c6af-e7f4-4b1c-818e-9eda6dd9cb82",
 CellID->2591],
Cell[7126, 180, 228, 4, 36, "TechNoteText",ExpressionUUID->"b612293d-b26c-4a4f-9c16-0ee176d43931",
 CellID->590619292],
Cell[CellGroupData[{
Cell[7379, 188, 264, 6, 26, "Input",ExpressionUUID->"c005b7de-a8c7-45df-9f11-f64113601e19",
 CellID->219423307],
Cell[7646, 196, 215, 5, 35, "Output",ExpressionUUID->"9e37fe5e-f82a-4f84-a340-a0975f379d0a",
 CellID->272831206]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[7910, 207, 113, 1, 80, "TechNoteSection",ExpressionUUID->"00036f6a-63fd-4f4f-a2de-66a749e3d47c",
 CellID->237748664],
Cell[8026, 210, 178, 2, 36, "TechNoteMathCaption",ExpressionUUID->"e250cd9f-9b0e-4e7b-8c8b-dd8939ecf38b",
 CellID->30906755],
Cell[CellGroupData[{
Cell[8229, 216, 269, 6, 26, "Input",ExpressionUUID->"1542516c-d21f-43bc-a96f-434c0b7c4782",
 CellID->501709717],
Cell[8501, 224, 251, 6, 36, "Output",ExpressionUUID->"5ce1d3a9-dcd7-4e75-9690-197784b36a5a",
 CellID->227264227]
}, Open  ]],
Cell[CellGroupData[{
Cell[8789, 235, 176, 3, 26, "Input",ExpressionUUID->"afa7c4e4-7e9c-42d8-8885-a887ef7faee4",
 CellID->45907700],
Cell[8968, 240, 11124, 299, 70, "Output",ExpressionUUID->"f7a7b257-1130-4058-8645-df2afcda5d32",
 CellID->43000966]
}, Open  ]],
Cell[20107, 542, 192, 3, 70, "TechNoteMathCaption",ExpressionUUID->"f8838af4-b20d-4ec5-a66f-f7d8b078f083",
 CellID->340949841],
Cell[CellGroupData[{
Cell[20324, 549, 194, 4, 70, "Input",ExpressionUUID->"3ffb77c4-590c-4ead-a50c-cb1b18c855f9",
 CellID->152984908],
Cell[20521, 555, 171, 4, 35, "Output",ExpressionUUID->"9b5fba77-ff3f-47e9-95f9-f7f310b9adb5",
 CellID->63383656]
}, Open  ]],
Cell[20707, 562, 162, 2, 70, "TechNoteMathCaption",ExpressionUUID->"2e56b696-7921-4dd2-bf7d-0c15be4b3e70",
 CellID->579788294],
Cell[CellGroupData[{
Cell[20894, 568, 185, 4, 70, "Input",ExpressionUUID->"9e3189cf-1dac-4683-b068-aa39e4a347fe",
 CellID->8585758],
Cell[21082, 574, 149, 3, 35, "Output",ExpressionUUID->"b5916929-e2a3-46c4-bf9e-c2aca0de6b8c",
 CellID->460763986]
}, Open  ]],
Cell[CellGroupData[{
Cell[21268, 582, 200, 4, 70, "Input",ExpressionUUID->"8d2cec3f-4b54-43fc-ae0e-c64bd1ae354a",
 CellID->1001352657],
Cell[21471, 588, 143, 3, 35, "Output",ExpressionUUID->"a6d97a4e-7815-4021-af0e-b41e8e7c3949",
 CellID->16490087]
}, Open  ]],
Cell[21629, 594, 139, 1, 70, "TechNoteMathCaption",ExpressionUUID->"8565d89a-3dc1-40ac-acd5-d801d217a040",
 CellID->210058381],
Cell[CellGroupData[{
Cell[21793, 599, 240, 5, 70, "Input",ExpressionUUID->"2de0fa28-d123-428b-b5e2-98d1c8625d06",
 CellID->3618976],
Cell[22036, 606, 230, 6, 36, "Output",ExpressionUUID->"58592733-54e0-4d30-94a9-3da47c44295c",
 CellID->61579599]
}, Open  ]],
Cell[CellGroupData[{
Cell[22303, 617, 199, 4, 70, "Input",ExpressionUUID->"660b225c-1422-4319-8e29-d30e3deb8688",
 CellID->158897045],
Cell[22505, 623, 194, 5, 35, "Output",ExpressionUUID->"2f122f61-1ef2-46f0-9389-554e45070651",
 CellID->4430423]
}, Open  ]],
Cell[22714, 631, 178, 3, 70, "TechNoteMathCaption",ExpressionUUID->"2af08122-2b75-4880-a344-84d2102e1006",
 CellID->45747336],
Cell[CellGroupData[{
Cell[22917, 638, 191, 4, 70, "Input",ExpressionUUID->"66b70e28-e77a-447e-a23b-1b9e9d0d56eb",
 CellID->106947108],
Cell[23111, 644, 148, 3, 35, "Output",ExpressionUUID->"fe8b0a84-f99e-464c-a8f1-06ec8703fc89",
 CellID->17869975]
}, Open  ]],
Cell[CellGroupData[{
Cell[23296, 652, 196, 4, 70, "Input",ExpressionUUID->"4468754d-b339-4a2a-9d0d-4595095e64b6",
 CellID->289386853],
Cell[23495, 658, 144, 3, 35, "Output",ExpressionUUID->"bc2202ab-62f1-421b-b74e-ee33964fb58b",
 CellID->884702477]
}, Open  ]],
Cell[CellGroupData[{
Cell[23676, 666, 196, 4, 70, "Input",ExpressionUUID->"d79fbaf0-27e6-49a8-aa49-3068b2ea26df",
 CellID->616336306],
Cell[23875, 672, 142, 3, 35, "Output",ExpressionUUID->"36406cd8-801d-4b3d-beef-cb79da63db25",
 CellID->4026612]
}, Open  ]],
Cell[24032, 678, 218, 4, 70, "TechNoteMathCaption",ExpressionUUID->"58782be3-aee4-4688-9aa0-f67ced329f3f",
 CellID->657986846],
Cell[CellGroupData[{
Cell[24275, 686, 180, 3, 70, "Input",ExpressionUUID->"53397038-fd0e-4d9a-9edd-b596769b620d",
 CellID->3639185],
Cell[24458, 691, 9371, 255, 70, "Output",ExpressionUUID->"02fe16fe-6ea1-47fb-b157-5af0c139996a",
 CellID->35599521]
}, Open  ]],
Cell[CellGroupData[{
Cell[33866, 951, 245, 6, 70, "Input",ExpressionUUID->"b8a9ab4a-ca17-489b-a112-77b3eb665233",
 CellID->106876852],
Cell[34114, 959, 10484, 301, 70, "Output",ExpressionUUID->"74d6cd85-637a-4f17-85c0-da831feaf9d7",
 CellID->380757827]
}, Open  ]],
Cell[44613, 1263, 131, 1, 70, "TechNoteMathCaption",ExpressionUUID->"ea217606-4fc7-4ae5-b860-1a9d9c0c9bb4",
 CellID->201555096],
Cell[CellGroupData[{
Cell[44769, 1268, 244, 6, 70, "Input",ExpressionUUID->"7365682a-9352-4f44-8e92-8fa88547b46e",
 CellID->76274047],
Cell[45016, 1276, 20207, 631, 70, "Output",ExpressionUUID->"783eaae8-3c67-40f5-b198-98181b398079",
 CellID->200297245]
}, Open  ]],
Cell[65238, 1910, 183, 3, 70, "TechNoteMathCaption",ExpressionUUID->"193fd985-a1c8-4cb4-8049-61c540b24416",
 CellID->116384939],
Cell[CellGroupData[{
Cell[65446, 1917, 265, 6, 70, "Input",ExpressionUUID->"1650bdc2-d3dd-44d2-935a-cb0166afa61e",
 CellID->11721902],
Cell[65714, 1925, 9875, 334, 70, "Output",ExpressionUUID->"fe4497d2-b4a0-45e8-a12b-2d65fa561b8d",
 CellID->436036227]
}, Open  ]],
Cell[75604, 2262, 123, 1, 70, "TechNoteMathCaption",ExpressionUUID->"86b94b57-eaac-4303-81af-a7050b4a3f0d",
 CellID->7379660],
Cell[CellGroupData[{
Cell[75752, 2267, 218, 4, 70, "Input",ExpressionUUID->"fc483901-d97e-4372-9f6a-9813c3022a4b",
 CellID->57152497],
Cell[75973, 2273, 9875, 334, 70, "Output",ExpressionUUID->"306f88c8-9ee8-4934-b8e9-caa547808962",
 CellID->785266654]
}, Open  ]],
Cell[85863, 2610, 145, 1, 70, "TechNoteMathCaption",ExpressionUUID->"124a6d2d-ea42-451a-94ee-c679eb1ebe95",
 CellID->600024437],
Cell[CellGroupData[{
Cell[86033, 2615, 286, 7, 70, "Input",ExpressionUUID->"85f25a87-aaee-49ac-aec1-40dc56984d69",
 CellID->356384648],
Cell[86322, 2624, 9875, 334, 70, "Output",ExpressionUUID->"166b99f3-9b10-48f5-9088-949ae3cdcc92",
 CellID->446846364]
}, Open  ]],
Cell[96212, 2961, 144, 1, 70, "TechNoteMathCaption",ExpressionUUID->"ef013166-4ead-44c5-b462-ff65ddc99d01",
 CellID->32533157],
Cell[CellGroupData[{
Cell[96381, 2966, 255, 6, 70, "Input",ExpressionUUID->"0416be1e-c919-43ec-aa1e-85469159a7b8",
 CellID->221488453],
Cell[96639, 2974, 9875, 334, 70, "Output",ExpressionUUID->"00092154-f75d-4482-af59-72a7fe82ead0",
 CellID->166436640]
}, Open  ]],
Cell[106529, 3311, 140, 1, 70, "TechNoteMathCaption",ExpressionUUID->"a2133ad2-2225-44aa-9f09-fb71192a71ea",
 CellID->441304007],
Cell[CellGroupData[{
Cell[106694, 3316, 289, 7, 70, "Input",ExpressionUUID->"a58c9ff8-287c-44c1-b668-5330c449eee6",
 CellID->784023909],
Cell[106986, 3325, 214, 5, 35, "Output",ExpressionUUID->"59bb91e8-ebe7-40fc-907f-af9cfa3d25a3",
 CellID->55707303]
}, Open  ]],
Cell[107215, 3333, 196, 4, 70, "TechNoteMathCaption",ExpressionUUID->"5149010d-c608-4898-8767-cfd634db1877",
 CellID->48363548],
Cell[CellGroupData[{
Cell[107436, 3341, 289, 7, 70, "Input",ExpressionUUID->"0994fd9e-af71-478d-908d-4500620df444",
 CellID->265849720],
Cell[107728, 3350, 171, 4, 35, "Output",ExpressionUUID->"b737de54-9ca7-48c8-8352-9765952fd8d6",
 CellID->23619359]
}, Open  ]],
Cell[CellGroupData[{
Cell[107936, 3359, 354, 9, 70, "Input",ExpressionUUID->"fd7a6e53-b654-4cbc-b5ee-9f48f9ec5f56",
 CellID->10018807],
Cell[108293, 3370, 130, 2, 35, "Output",ExpressionUUID->"69d6f3c2-6774-4536-a874-a32ecdb99241",
 CellID->37584096]
}, Open  ]],
Cell[108438, 3375, 106, 1, 70, "TechNoteCaption",ExpressionUUID->"f5f60007-c978-4515-b0ad-835ba5ae7d46",
 CellID->56681674],
Cell[CellGroupData[{
Cell[108569, 3380, 127, 2, 70, "Input",ExpressionUUID->"95b13454-664a-49ef-b319-51b599fe4560",
 CellID->49790133],
Cell[108699, 3384, 129, 2, 35, "Output",ExpressionUUID->"291a9438-7152-4128-85b7-ac77dd1cf2b8",
 CellID->380375781]
}, Open  ]],
Cell[108843, 3389, 81, 0, 70, "Input",ExpressionUUID->"119513f6-777f-4970-8a84-019e6028cdf9"],
Cell[108927, 3391, 81, 0, 70, "Input",ExpressionUUID->"9a333c3b-885a-422d-91a9-f103c30136a5"]
}, Open  ]]
}, Open  ]],
Cell[109035, 3395, 78, 0, 70, "FooterCell",ExpressionUUID->"ca0cb801-7c10-47bd-87ca-61d8797070e8"]
}
]
*)

(* End of internal cache information *)

